# è‡ªæˆ‘ä»‹ç»

â€	é¢è¯•å®˜ä½ å¥½ï¼Œæˆ‘å«æ›¾åšä½³ï¼Œæ¯•ä¸šäºåŒ—äº¬å¸ˆèŒƒå¤§å­¦ç æµ·åˆ†æ ¡è½¯ä»¶å·¥ç¨‹ä¸“ä¸šã€‚å¼€å‘æŠ€èƒ½ä¸Šä¸»è¦ä»¥Javaè¯­è¨€ä¸ºä¸»ï¼Œæœ‰æ‰å®çš„JavaåŸºç¡€å’Œè‰¯å¥½çš„ç¼–ç é£æ ¼ï¼Œç†Ÿæ‚‰å¹¶å‘ç¼–ç¨‹ã€JVMåŠé”çŸ¥è¯†ï¼Œå¼€å‘æ¨¡å¼ä¸Šç†Ÿæ‚‰ä»¥SpringBootã€SpringCloudä¸ºä¸»çš„Webå¼€å‘æ¨¡å¼ï¼Œä½†æ˜¯æœ€è¿‘æœ‰äººäº†è§£åˆ°Goè¯­è¨€ï¼Œä¹Ÿæœ‰æ„æ„¿å­¦ä¹ å’Œè½¬è¯­è¨€ã€‚ç›®å‰çš„å·¥ä½œç»å†ä¸»è¦æœ‰ä¸¤æ®µï¼Œç¬¬ä¸€æ˜¯åšå›½é™…èˆªè¿ç”Ÿå‘½å‘¨æœŸç¼–æ’ç³»ç»Ÿå¼€å‘ï¼Œç‰¹ç‚¹æ˜¯é‡‡ç”¨æ•æ·å¼€å‘ã€å¾®æœåŠ¡å¼€å‘ï¼Œé‡‡ç”¨K8SæœåŠ¡ç½‘æ ¼åšå¾®æœåŠ¡å®¹å™¨ç¼–æ’å’Œéƒ¨ç½²ã€‚ç¬¬äºŒæ˜¯åœ¨ä¸€å®¶äº¤é€šè¡Œä¸šå…¬å¸åšæ™ºæ…§æœåŠ¡åŒºçš„å¼€å‘ï¼Œå®ƒçš„ç‰¹ç‚¹ä¸»è¦æ˜¯ç‰©è”ç½‘ã€åŸºç¡€è®¾å¤‡çŠ¶æ€é‡‡é›†ã€å¾®æœåŠ¡å¼€å‘ã€‚æœ€ååšæ˜¯ç®€å•çš„è‡ªæˆ‘è¯„ä»·ï¼Œæˆ‘æ˜¯ä¸€ä¸ªæ¯”è¾ƒä¸Šè¿›ï¼Œæœ‰è¾ƒå¥½çš„è‡ªæˆ‘é©±åŠ¨åŠ›åŠè‡ªå¾‹èƒ½åŠ›ï¼Œæœ‰æœºä¼šçš„è¯å¸Œæœ›èƒ½å¤Ÿè¿›å…¥åˆ°å…¬å¸ï¼Œè·Ÿä¼˜ç§€çš„äººä¸€èµ·å¹²æœ‰æŒ‘æˆ˜æ€§çš„äº‹ã€



# å¦‚ä½•ç¼–å†™ç®€å

- https://juejin.cn/post/6844904034218803214#heading-6



# é¢è¯•è®°å½•



CVTEä¸€è½®é¢è¯•ï¼š

1. JVM
   1. æ—§ç³»ç»Ÿçš„OOMï¼ŸOOMå¦‚ä½•åšæ£€æµ‹å’Œæ£€æŸ¥ï¼Ÿ
   2. åƒåœ¾å›æ”¶å™
      1. åƒåœ¾å›æ”¶å™¨æœ‰å“ªäº›ï¼ŸG1å’ŒCMSçš„åŒºåˆ«ï¼Ÿå›æ”¶æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿé€‚åˆåœ¨ä»€ä¹ˆåœºæ™¯ï¼Ÿ
      2. æ–°ç”Ÿä»£è€å¹´ä»£çš„åƒåœ¾å›æ”¶ç­–ç•¥
   3. æ ‡è®°-æ•´ç†å’Œæ ‡è®æ¸…é™¤çš„åŒºåˆ«ï¼Ÿ
   4. åšè¿‡å“ªäº›JVMä¸Šçš„ä¼˜åŒ–ï¼
   5. å¦‚ä½•æ£€æŸ¥çº¿ç¨‹æ•°é‡ï¼Œå¯ä»¥é€šè¿‡å“ªäº›æ–¹å¼å»æ£€æŸ¥ï¼ŸJDKè‡ªå¸¦å“ªäº›å·¥å…·ï¼

2. é¡¹ç›®
   1. æ—§ç³»ç»Ÿä¸ºä»€ä¹ˆè¦è¿›è¡Œæ‹†åˆ†ï¼
      1. å‡ºç°OOMï¼Ÿå“ªäº›OOMï¼Ÿå†…å­˜æ³„éœ²ï¼Ÿçº¿ç¨‹åˆ›å»ºè¿‡å¤šï¼
      2. çº¿ä¸Šéƒ¨ç½²äº†å‡ ä¸ªå®ä¾‹ï¼Ÿ
      3. æœåŠ¡è€¦åˆï¼Œç›¸äº’å½±å“ï¼Œç‰ˆæœ¬æ§åˆ¶å›°éš¾ã€
   2. å¾®æœåŠ¡ç›‘æ§æ€ä¹ˆåšçš„ï¼Ÿå¦‚ä½•è¯„ä¼°æœåŠ¡éœ€è¦æ‰©å®¹ï¼Ÿå¦‚ä½•åŠæ—¶å‘ç°ç³»ç»Ÿå¼‚å¸¸æƒ…å†µï¼
   3. éš¾ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è§£å†³çš„ï¼Ÿ
   4. æ‹†åˆ†æˆå¤šå°‘ä¸ªæœåŠ¡ï¼Ÿå¾®æœåŠ¡æ‹†åˆ†æ—¶é—´å¤šé•¿ï¼
   5. æ•°æ®åº“ä¹Ÿæ˜¯åšäº†æ‹†åˆ†å—ï¼ŸæŒ‰æ•°æ®è¡¨åšå‚ç›´æ‹†åˆ†ï¼Ÿä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼ˆåˆ†å¸ƒå¼äº‹åŠ¡ï¼‰
   6. å•è¡¨æ•°æ®é‡æ˜¯å¤šå¤§ï¼
   7. é‡‡ç”¨äº†ä»€ä¹ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨æ¶ˆæ¯é˜Ÿåˆ—åšæœåŠ¡é€šä¿¡è€Œä¸ç”¨spring cloudï¼
   8. é¡¹ç›®é‡‡ç”¨äº†DDDï¼Œåœ¨å¾®æœåŠ¡ä¸­DDDæ˜¯å¦‚ä½•åˆ†å±‚çš„ï¼
   9. è‡ªå·±å­¦ä¹ äº†ä»€ä¹ˆçŸ¥è¯†ï¼Ÿåº”ç”¨åˆ°é¡¹ç›®äº†å—ï¼Ÿ
      1. åˆ†å¸ƒå¼äº‹åŠ
      2. åˆ†å¸ƒå¼ID
      3. redis bitmap
      4. å¹‚ç­‰æ€§å¤„ç†ã€æœ‰åºæ€§å¤„ç†ã€å¯é æ€§å¤„ç
      5. netty nioé‡‡é›†
3. MySQLï¼ˆå›ç­”çš„è¿˜å¯ä»¥ï¼‰
   1. å¦‚ä½•è¿›è¡Œä¼˜åŒ–ï¼
   2. ç´¢å¼•ç»“æ„æœ‰å“ªäº›ï¼Ÿ
   3. æœ‰åšåˆ†åº“åˆ†è¡¨å—ï¼Ÿ
   4. MySQLé”æœ‰å“ªäº›ï¼Ÿé—´éš™é”çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆéš”ç¦»çº§åˆ«ï¼šå¯é‡å¤è¯»ï¼Œè§£å†³å¹»è¯»ï¼‰
   5. éœ€è¦é‡ç‚¹äº†è§£ï¼šæ­»é”åŠè§£å†³æ€è·¯



# é¢è¯•å‡†å¤‡



## è®¡ç®—æœºç½‘ç»



### çŠ¶æ€ç 

- https://juejin.cn/post/7104117388676694046





## ç®—æ³•



### æ’åºç®—æ³•



#### å¿«é€Ÿæ’åºï¼ˆæ™®é€+ åŒæŒ‡é’ˆï¼‰

> ä¸ç¨³å®šç®—æ³
>
> ç®—æ³•æ€æƒ³ï¼šåˆ†è€Œæ²»ä¹‹ï¼ˆåˆ†æ²»æ€æƒ³ï¼
>
> æ—¶é—´å¤æ‚åº¦ï¼š
>
> - æœ€åï¼šO(n ^ 2)ï¼Œæ•°ç»„åŸºæœ¬æœ‰åºå¹¶å–æœ€å·¦è¾¹çš„ä½œä¸ºpivot
> - æœ€å¥½ï¼šO(nlog(n))ï¼Œæ¯æ¬¡éƒ½èƒ½å¹³å‡åˆ†å‰
> - å¹³å‡ï¼šO(nlog(n))
>
> ç©ºé—´å¤æ‚åº¦ï¼š
>
> - æœ€å¥½ï¼šO(logn)ï¼špivotä¸ºä¸­é—´å€¼ï¼Œæ ‘å¹³è¡
> - æœ€åï¼šO(n)ï¼šæ•°ç»„åŸºæœ¬æœ‰åºï¼Œå–ç¬¬ä¸€ä¸ªæ•°ä½œä¸ºpivotä¼šå¯¼è‡´ç”Ÿæˆæ ‘ä¸å¹³è¡¡ï¼Œæ•°é«˜åºæ•°ç»„é•¿åº¦
> - å¹³å‡ï¼šO(logn)

```
public int[] sortArray(int[] nums) {

    quickSort(nums, 0, nums.length - 1);

    return nums;
}

public void quickSort(int[] nums, int left, int right){
    if(left >= right){
        return;
    }

    int pIndex = partition(nums, left, right);
    quickSort(nums, left, pIndex - 1);
    quickSort(nums, pIndex + 1, right);
}

// æ™®é€šå¿«æ
private int partition1(int[] nums, int left, int right){

    int pivot = nums[left];
    int lt = left;

    for(int i = left + 1;i <= right;i ++){
        if(nums[i] <= pivot){
            lt ++;
            swap(nums, i, lt);
        }
    }
    swap(nums, left, lt);

    return lt;
}

// åŒæŒ‡é’ˆå¿«æ
private int partition2(int[] nums, int left, int right){

    int pivot = nums[left];
    int lt = left;
    int gt = right;

    while(lt < gt){
        while(lt < gt && nums[gt] >= pivot){
            gt --;
        }

        while(lt < gt && nums[lt] <= pivot){
            lt ++;
        }

        swap(nums, lt, gt);
    }
    swap(nums, left, lt);

    return lt;
}

private void swap(int[] nums, int left,int right){
    int tmp = nums[left];
    nums[left] = nums[right];
    nums[right] = tmp;
}
```



#### å †æ’åº

>ä¸ç¨³å®šç®—æ³
>
>æ—¶é—´å¤æ‚åº¦ï¼š
>
>- å¹³å‡ï¼šO(nlogn)
>- æœ€åï¼šO(nlogn)
>
>ç©ºé—´å¤æ‚åº¦ï¼š
>
>- O(1)

```
public int[] sortArray(int[] nums) {
    
    // æ„å»ºå¤§æ ¹å †ï¼Œå †é¡¶ä¸ºæœ€å¤§å€
    int len = nums.length - 1;
    for(int i = len / 2;i >= 0;i --){
        adjustHeap(nums, i, len);
    }
	
	// æ›¿æ¢å †é¡¶å’Œæ•°ç»„å°¾ï¼Œå†æ¬¡è°ƒæ•´å¤§æ ¹å †ï¼Œé‡å¤æå–å½“å‰å †çš„æœ€å¤§å€¼å³å¯å®Œæˆæ’åº
    for(int i = len;i >=0 ;i --){
        swap(nums, 0, i);
        adjustHeap(nums, 0, i - 1);
    }

    return nums;
}

// kä¸ºèµ·å§‹èŠ‚ç‚
private void adjustHeap(int[] nums, int k, int end){

    while(2 * k + 1 <= end){
        int j = 2 * k + 1;
        if(j + 1 <= end && nums[j + 1] >= nums[j]){
            j ++;
        }
        if(nums[j] > nums[k]){
        	// ç”±äºå‘ç”Ÿäº†æ›¿æ¢ï¼Œæ‰€ä»¥è¢«æ›¿æ¢çš„å­èŠ‚ç‚¹éœ€è¦è°ƒæ•
            swap(nums, j, k);
            k = j;
        }else {
        	// å½“å‰èŠ‚ç‚¹å·²ç»ä¸ºæ‰€åœ¨å †æœ€å¤§å€
            break;
        }
    }
}

private void swap(int[] nums, int left, int right){
    int tmp = nums[left];
    nums[left] = nums[right];
    nums[right] = tmp;
}
```



#### å½’å¹¶æ’åº

>ç¨³å®šç®—æ³•
>
>ç®—æ³•æ€è·¯ï¼šåˆ†è€Œæ²»ä¹‹ï¼ˆåˆ†æ²»æ€æƒ³ï¼‰ï¼Œé€’å½’åˆ†åˆ«æ’åºï¼Œå¹¶ä¸”åˆå¹¶ä¸¤ä¸ªæ’åºåçš„æ•°ç»
>
>æ—¶é—´å¤æ‚åº¦ï¼š
>
>- æœ€å¥½ã€æœ€åã€å¹³å‡ï¼šO(nlogn)
>
>ç©ºé—´å¤æ‚åº¦ï¼š
>
>- O(n)ï¼šéœ€è¦é¢å¤–çš„ç©ºé—´åˆå¹¶æ•°ç»„

```
public int[] sortArray(int[] nums) {
    if(nums.length <= 1){
        return nums;
    }
    
    int num = nums.length / 2;
    int[] left = Arrays.copyOfRange(nums, 0, num);
    int[] right = Arrays.copyOfRange(nums, num, nums.length);

    return merge(sortArray(left), sortArray(right));
}


private int[] merge(int[] left, int[] right){
    int len1 = left.length;
    int len2 = right.length;
    int i = 0, j = 0, k = 0;

    int[] res = new int[len1 + len2];
    while(i < len1 && j < len2){
        if(left[i] < right[j]){
            res[k++] = left[i++];
        }else {
            res[k++] = right[j++];
        }
    }
    while(i < len1){
        res[k++] = left[i++];
    }

    while(j < len2){
        res[k++] = right[j++];
    }

    return res;
}
```







### ç¼“å­˜æ·˜æ±°ç®—æ³•

- FIFOï¼ˆFirst in First outï¼‰ï¼šå…ˆè¿›å…ˆå‡ºç®—æ³•ã€‚æ€è·¯ï¼šå…ˆè¿›å…¥ç¼“å­˜çš„ï¼Œå…ˆè¢«æ·˜æ±°ã€
- LFUï¼ˆLeast Frequently Usedï¼‰ï¼šæœ€è¿‘æœ€å¸¸ä½¿ç”¨ã€‚æ€è·¯ï¼šæœ€è¿‘ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„æ›´å®¹æ˜“è¢«å†æ¬¡ä½¿ç”¨ã€
- LRUï¼ˆLeast Recently Userï¼‰ï¼šæœ€è¿‘æœ€å°‘ä½¿ç”¨ã€‚æ€è·¯ï¼šæœ€è¿‘è¢«ä½¿ç”¨çš„å¤§æ¦‚ç‡æ›´å®¹æ˜“è¢«å†æ¬¡ä½¿ç”¨ã€

```
class DLinkNode {
    int key;
    int val;

    DLinkNode prev;
    DLinkNode next;

    public DLinkNode(){}
    public DLinkNode(int key, int val){
        this.key = key;
        this.val = val;
    }
}

int capacity;
DLinkNode dummyHead;
DLinkNode dummyTrail;
Map<Integer, DLinkNode> cache;

public LRUCache(int capacity) {
    this.capacity = capacity;
    dummyHead = new DLinkNode();
    dummyTrail = new DLinkNode();
    cache = new HashMap<>();

    dummyHead.next = dummyTrail;
    dummyTrail.prev = dummyHead;
}

public int get(int key) {
    DLinkNode node = cache.get(key);
    if(node == null){
        return -1;
    }

    removeNode(node);
    addNodeToHead(node);

    return node.val;
}

public void put(int key, int value) {
    DLinkNode node = cache.get(key);
    if(node == null){
        if(cache.size() >= this.capacity){
            DLinkNode rNode = dummyTrail.prev;
            removeNode(rNode);
            cache.remove(rNode.key);
        }
        DLinkNode nNode = new DLinkNode(key, value);
        addNodeToHead(nNode);
        cache.put(key, nNode);
    }else {
        node.val = value;
        removeNode(node);
        addNodeToHead(node);
    }
}

private void removeNode(DLinkNode node){
    node.prev.next = node.next;
    node.next.prev = node.prev;
}

private void addNodeToHead(DLinkNode node){
    node.prev = dummyHead;
    node.next = dummyHead.next;
    node.next.prev = node;
    dummyHead.next = node;
}
```







### æ ¡éªŒç®—æ³•

å®Œæˆçš„æ•°æ®å¸§ï¼

![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/5rmsa7bv09.jpeg)

- å¥‡å¶æ ¡éªŒï¼šç»Ÿè®¡æ•°æ®ä¸­æ•°å­—1çš„ä¸ªæ•
  - å¶æ ¡éªŒä½ï¼šå¦‚æœä¸ºå¥‡æ•°ï¼Œåˆ™è¡¥ä¸€ä¸ªbit1ï¼Œä½¿å¾—æ€»çš„1çš„ä¸ªæ•°ä¸ºå
  - å¥‡æ ¡éªŒä½ï¼šå¦‚æœä¸ºå¥‡æ•°ï¼Œåˆ™è¡¥ä¸€ä¸ªbit0ï¼Œä½¿å¾—æ€»çš„1çš„ä¸ªæ•°ä¸ºå¥

![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/v2-9c025c1b6d3b754f46375968fba3f26e_b.jpg)

- æ ¡éªŒå’Œï¼š
  - MD5ï¼šä¸€ç§å“ˆå¸Œç®—æ³•ï¼Œå°†ä»»ä½•æ•°æ®è½¬æ¢æˆå›ºå®šé•¿åº¦ï¼28ï¼‰ä½æ•°çš„ç®—æ³•ï¼Œä¸å¯é€†ã€
  - CRCï¼šå¾ªç¯å†—ä½™æ ¡éªŒï¼Œæ˜¯ä¸€ç§å¯¹ç½‘ç»œæ•°æ®åŒ…è¿›è¡Œå¤šé¡¹å¼è®¡ç®—ï¼Œå¹¶å¾—åˆ°å›ºå®šé•¿åº¦ä½çš„æ•°æ®ä¼ è¾“æ£€é”™ç®—æ³•ã€



### å…¶ä»–







## ä¸­é—´ä»



### Redis

- åœºæ™¯ï¼šhttps://www.nowcoder.com/discuss/953289?type=all&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_all_nctrack&gio_id=7A239D7C6F1FE3A8AAC731BCD696C405-1655743167774
- é«˜é¢‘é¢è¯•é¢˜ï¼šhttps://www.nowcoder.com/discuss/945665?type=all&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_all_nctrack&gio_id=7A239D7C6F1FE3A8AAC731BCD696C405-1655743167774



#### Redisç”¨åœ¨ä»€ä¹ˆåœºæ™¯ï¼Ÿ

- å·²ç”¨ï¼

  - ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯ã€åŸºç¡€ç”¨æˆ·ä¿¡æ¯ã€æ¥å£æƒé™ä¿¡æ
  - å¹‚ç­‰æ€§å¤„ç†ï¼ˆå¼•å‡ºKafkaï¼
    - å››ç§è§£å†³å¹‚ç­‰æ–¹æ¡ˆï¼šhttps://juejin.cn/post/6906290538761158670
    - å¡å£è½¦è¾†é©¶å…¥ï¼Œä¼šå‡ºç°é‡å¤æ¶ˆè´¹çš„é—®é¢˜å—ï¼Ÿä¼šæœ‰çš„
      - æ¯”å¦‚å¡å£å¯¹åŒä¸€è¾†è½¦å¯èƒ½ä¼šä¼ å¤šä»½ç…§ç‰‡
      - Kafkaæ˜¯autocommitæœºåˆ¶
        - å¦‚æœæ¶ˆè´¹è€…è¿˜æ²¡æ¥å¾—åŠcommitå°±é‡å¯ï¼Œé‡å¯åä¼šä»kafkaæ‹‰å–æœªè¿‡æ›´æ–°çš„offsetï¼Œåˆ™ä¼šé€ æˆé‡å¤æ¶ˆè´¹ã€
        - å¦‚æœcommitäº†ï¼Œä½†æ˜¯MQå®•æœºå¯¼è‡´æ¥æ”¶ä¸åˆ°ï¼Œåˆ™é‡å¯åä¼šé‡å¤æ¶ˆè´¹
  - bitmapç»Ÿè®¡è®¾å¤‡åœ¨çº¿ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ›
- å…¶ä»–
  - ç®€å•æ¶ˆæ¯é˜Ÿåˆ
  - åˆ†å¸ƒå¼é”



#### Redisåº”ç”¨åˆ°äº†å“ªäº›æ•°æ®ç»“æ„ï¼ˆç¼“å­˜ï¼‰ï¼

- Stringï¼ˆç¼“å­˜ç»Ÿè®¡æ•°æ®ï¼Œæé«˜è¯»æ€§èƒ½ï¼
- å“ˆå¸Œï¼ˆæœåŠ¡åŒºçš„mapä½œä¸ºç¼“å­˜ï¼
- Listï¼ˆå¡å£åŸºæœ¬æ•°æ®ï¼‰



### Netty

- é€šä¿—çš„ç†è§£Nettyï¼šhttps://www.zhihu.com/question/24322387
- *NettyçŸ¥è¯†ï¼šhttps://juejin.cn/post/6844903703183360008
- é¢è¯•é¢˜ï¼š
  - https://www.nowcoder.com/discuss/832208?type=all&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_all_nctrack&gio_id=9B179C1C22CC722DBBC116E475A9AFD2-1656053990442
  - https://juejin.cn/post/6999225355374428168
  - é˜¿é‡Œå¤§ç‰›ï¼šhttps://zhuanlan.zhihu.com/p/148726453



#### ä»€ä¹ˆæ˜¯Netty

> Nettyæ˜ä¸€ä¸ªå¼‚æ­¥äº‹ä»¶é©±åŠ¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºæ¡†æ¶ï¼Œç”¨äºå¼€å‘çš„é«˜æ€§èƒ½åè®®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ã€‚Nettyæœ¬è´¨æ˜¯ä¸Šå¯¹Java NIOçš„å°è£…ï¼Œé‡‡ç”¨Reactorçº¿ç¨‹æ¨¡å‹ï¼ˆSelectorï¼ˆå¤šè·¯å¤ç”¨ï¼‰å™¨ã€Acceptorã€Handlerï¼‰ã€é›¶æ‹·è´æŠ€æœ¯ï¼Œæå¤§çš„æå‡äº†socketé€šä¿¡æ€§èƒ½ã€



#### Nettyçš„ç‰¹ç‚

> é«˜å¹¶å‘ã€ä¼ è¾“å¿«å’Œå°è£…å¥½

- **é«˜å¹¶å*ï¼šNetty æ˜¯ä¸€æ¬¾åŸºäºNIOï¼ˆNonblocking IOï¼Œéé˜»å¡IOï¼‰å¼€å‘çš„**ç½‘ç»œé€šä¿¡æ¡†æ¶**ï¼Œå¯¹æ¯”äº BIOï¼ˆBlocking I/Oï¼Œé˜»å¡IOï¼‰ï¼Œä»–çš„å¹¶å‘æ€§èƒ½å¾—åˆ°äº†å¾ˆå¤§æé«˜ã€
- **ä¼ è¾“å¿*ï¼šNetty çš„ä¼ è¾“ä¾èµ–äºé›¶æ‹·è´ç‰¹æ€§ï¼Œå°½é‡å‡å°‘ä¸å¿…è¦çš„å†…å­˜æ‹·è´ï¼Œå®ç°äº†æ›´é«˜æ•ˆç‡çš„ä¼ è¾“ã€
- **å°è£…å¥*ï¼šNetty å°è£…äºNIO æ“ä½œçš„å¾ˆå¤šç»†èŠ‚ï¼Œæä¾›äº†æ˜“äºä½¿ç”¨è°ƒç”¨æ¥å£ã€



#### Nettyçš„åº”ç”¨åœºæ™¯ï¼Ÿä½ ä»¬é¡¹ç›®ç”¨åœ¨ä»€ä¹ˆåœ°æ–

> Nettyä¸»è¦ä½œä¸ºåŸºç¡€é€šä¿¡æ¡†æ¶æä¾›é«˜æ€§èƒ½ã€ä½å»¶æ—¶çš„é€šä¿¡æœåŠ¡ã€‚å¯ç”¨äºæ„å»ºé«˜æ€§èƒ½ã€ä½å»¶æ—¶çš„å„ç§Javaä¸­é—´ä»¶ï¼Œä¾‹å¦‚é˜¿é‡Œåˆ†å¸ƒå¼æœåŠ¡æ¡†æDubboã€RocketMQ é»˜è®¤ä½¿ç”¨ Netty ä½œä¸ºé€šè®¯æ¡†æ¶ã€

- ä½œä¸ºåŸºç¡€è®¾å¤‡é€šä¿¡æ¡†æ¶ï¼Œä¾‹å¦‚é‡‡ç”¨NIOåšæƒ…æŠ¥æ¿ã€æ°´ç”µè¡¨æ•°æ®åŠåŸºç¡€è®¾å¤‡ä¿¡æ¯çš„é‡‡é›†ã€
  - æƒ…æŠ¥æ¿é€šä¿¡ï¼šåœè½¦ä½è‡ªåŠ¨å‘å¸ƒï¼Œå…¶å‘å¸ƒè¿‡ç¨‹åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼.åˆ é™¤æ—§æ–‡ä»2.åˆ›å»ºæ–‡ä»¶ 3.ä¸‹å‘æ–‡ä»¶ 4. æ’­æ”¾æ–
  - è®¾å¤‡çŠ¶æ€é‡‡é›†ï¼šé€šè¿‡SNMPåè®®ï¼ŒNIOè·å–å¹¶å¼‚æ­¥æ›´æ–°è®¾å¤‡çŠ¶æ€




#### Nettyçš„æ•´ä¸ªå¤„ç†æµç¨

![Drawing 1.png](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesCiqc1F-NO9KAUOtaAAE1S5uRlDE275.png)

- æœåŠ¡ç«

![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/166cf93e830044e7%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)

![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/166cf9418d4c86e4%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)



- å®¢æˆ·ç«

![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/166cf957e59b5066%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)



#### NIOã€BIOã€AIOçš„åŒºåˆ

- https://juejin.cn/post/6844903687626686472

- è¡ç”Ÿï¼šLinuxçš„äº”ç§IOæ¨¡å‹çš„åŒºåˆ«ï¼ˆç£ç›˜IOï¼

![image-20220705103107463](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/image-20220705103107463.png)

- Javaä¸­ä¸‰ç§IOæ¨¡å‹çš„åŒºåˆ«ï¼ˆBIOã€NIOã€AIOï¼

  > Javaä¸­çš„ä¸‰ç§IOæ¨¡å‹éƒ½æ˜¯ä¾èµ–æ“ä½œç³»ç»ŸIOè¿›è¡Œçš„å°è£…ï¼Œ

  - BIOï¼*åŒæ­¥é˜»å¡å‹IO**ï¼è¯·æ±‚1çº¿ç¨‹è¿æ¥ï¼‰ï¼Œè¿æ¥å»ºç«‹åç”¨æˆ·çº¿ç¨‹å‘èµ·IOè¯·æ±‚ï¼Œç³»ç»Ÿåˆ‡æ¢åˆ°å†…æ ¸æ€è¯»å–ç£ç›˜æ•°æ®åˆ°å†…æ ¸ç¼“å†²åŒºï¼Œæ­¤è¿‡ç¨‹ä¸­ç”¨æˆ·çº¿ç¨‹é˜»å¡ç­‰å¾…ç›´åˆ°å†…æ ¸ç¼“å†²åŒºæ•°æ®è¯»å–å®Œæˆï¼Œå†å°†å…¶å¤åˆ¶åˆ°ç”¨æˆ·æ€ç¼“å†²åŒºï¼ˆå†åˆ°socketç¼“å†²åŒºï¼‰

  - NIOï¼*åŒæ­¥éé˜»å¡å‹IO**ï¼ˆå¤šè¯·æ±‚1çº¿ç¨‹è¿æ¥ï¼‰ï¼Œè¿æ¥å»ºç«‹åï¼Œç”¨æˆ·çº¿ç¨‹å‘èµ·IOè¯·æ±‚å¹¶æ³¨å†Œåˆ°selectorï¼ˆå¤šè·¯å¤ç”¨å™¨ï¼‰ä¸­ï¼Œæ³¨å†Œå®Œç”¨æˆ·çº¿ç¨‹è¿”å›ï¼Œç”±Selectorï¼Selector å…¶å®å°±æ˜¯ select/poll/epoll çš„å¤–åŒ…ç±»ï¼‰ä¸­çš„çº¿ç¨‹å»æ£€æŸ¥å¤šè·¯è¿æ¥çš„IOæ˜¯å¦å‡†å¤‡å°±ç»ªï¼Œå®Œæ¯•åˆ™è°ƒç”¨ç”¨æˆ·çº¿ç¨‹å°†å†…æ ¸ç¼“å†²åŒºçš„æ•°æ®å¤åˆ¶åˆ°ç”¨æˆ·ç¼“å†²åŒºã€‚ä¸ä¸Šé¢çš„Linuxæ¨¡å‹ä¸­çš„æ™®é€šNIOï¼ˆä¸æ–­è½®è¯¢æŸ¥çœ‹ï¼‰ä¸åŒï¼ŒJavaä¸­çš„NIOæ˜¯ã€å¤šè·¯å¤ç”¨IO+ä¿¡å·é‡IOã€‘ï¼Œå¤§å¤§å‡å°‘ç”¨æˆ·çº¿ç¨‹çš„æ¶ˆè€—ï¼Œä½†æ˜¯æ•°æ®ä»å†…æ ¸åˆ°ç”¨æˆ·çš„å¤åˆ¶ä»ç„¶ç”±ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šä»ç„¶æ˜¯åŒæ­¥çš„ã€

    ![image-20200610173230680](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/image-20200610173230680.png)

  - AIOï¼*éåŒæ­¥éé˜»å¡å‹IO**ã€‚ä¸åŒæ­¥å‹IOä¸åŒï¼Œå†…æ ¸æ€åˆ°ç”¨æˆ·æ€çš„æ•°æ®å¤åˆ¶åœ¨AIOä¸­ç›´æ¥ç”±å†…æ ¸çº¿ç¨‹è´Ÿè´£å¤„ç†ï¼Œæ‰€ä»¥å¯¹äºç”¨æˆ·çº¿ç¨‹æ¥è¯´ï¼Œæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€



#### Nettyçš„çº¿ç¨‹æ¨¡å‹äº†è§£å—ï¼

- https://juejin.cn/post/6844903974298976270

>  ç­”ï¼šReactoræ ¸å¿ƒç»„æˆéƒ¨åˆ†åŒ…æ‹¬Selectorã€Acceptorå’ŒHandlerï¼Œå…¶ä¸
>
> - selector ç›‘æ§è¿æ¥äº‹ä»¶ï¼ˆread/writeäº‹ä»¶ã€è¿æ¥äº‹ä»¶ï¼‰,æ”¶åˆ°äº‹ä»¶åé€šè¿‡**dispatch**è¿›è¡Œåˆ†å‘
>
>   - è¿æ¥äº‹ä»¶ï¼šåˆ†å‘åˆ°acceptoré€šè¿‡acceptæ¥æ”¶è¿æ¥ï¼Œå¹¶åˆ›å»ºHandlerã€
>   - è¯»å†™äº‹ä»¶ï¼šåˆ†å‘åˆ°Handlerè¿›è¡Œå¤„ç†ï¼*Handlerå®Œæˆread->(decode->compute->encode)->sendçš„ä¸šåŠ¡æµç¨*
>
>   è€Œæ ¹æ®Reactorçš„æ•°é‡å’Œå·¥ä½œçº¿ç¨‹æ± çš„æ•°é‡ï¼Œåˆå°†Reactoråˆ†ä¸ºä¸‰ç§æ¨¡å‹ã€

- å•Reactorå•çº¿ç¨‹æ¨¡åï¼ˆå•Reactorå•çº¿ç¨‹ï¼‰ï¼šå•çº¿ç¨‹å¤„ç†è¿æ¥äº‹ä»¶ã€è¯»å†™äº‹ä»¶ã€ç›‘å¬äº‹ä»¶ç­‰ï¼Œå¦‚æœå¤„ç†Handlerå‡ºç°æ­»å¾ªç¯ï¼Œå°†å¯¼è‡´æ•´ä¸ªæœåŠ¡ä¸å¯ç”¨ã€

![Reactor_1](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images16de9918fe8487b3%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)

- å•Reactorå¤šçº¿ç¨‹æ¨¡åï¼ˆå•Reactorå¤šçº¿ç¨‹ã€å¤„ç†Handlerçš„çº¿ç¨‹æ± ã€‘ï¼‰ï¼šä¸šåŠ¡å¤„ç†ç”±çº¿ç¨‹æ± å¼‚æ­¥æ‰§è¡Œï¼Œä½†æ˜¯åœ¨å¤§é‡é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œå•Reactorä»ç„¶ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€

![Reactor_2](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images16de9918fc15ffea%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)

- ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡åï¼ˆå¤šReactorå¤šçº¿ç¨ ï¼šä¸»ä»èŒè´£åˆ†ç¦»ï¼Œä¸»è´Ÿè´£è¿æ¥å»ºç«‹åŠéªŒè¯ï¼Œä»è´Ÿè´£äº‹ä»¶ç›‘å¬ã€åˆ†å‘ï¼Œæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„çº¿ç¨‹æ¨¡å‹ã€

![Reactor_3](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images16de9918fa25729e%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)

> ä¸»Reactorï¼šé€šè¿‡selectorç›‘å¬è¿æ¥äº‹ä»¶ï¼Œå¹¶è°ƒç”¨acceptoråˆ›å»ºè¿æ¥å¹¶å‘é€ç»™ä»Reactor
> ä»Reactorï¼šæ¥æ”¶åˆ°ä¸»Reactorçš„è¿æ¥ååŠ å…¥é˜Ÿåˆ—ï¼Œé€šè¿‡è‡ªå·±çš„Selectorç›‘å¬IOç®¡é“ï¼Œå¹¶å°†è¯»å†™äº‹ä»¶åˆ†å‘ç»™Handlerçš„TheadPoolï¼Œç”±è¯¥çº¿ç¨‹æ± åšHandlerçš„å¤„ç



ä¸‰ç§æ¨¡å‹è¯¦ç»†ä»‹ç»ï¼ˆæŒ‘é‡ç‚¹è®°å¿†ï¼Œæˆ‘é¢è¯•æ²¡é‡åˆ°è¿‡è®©è¯¦ç»†è¯´çš„ã€‚ï¼‰

- **å•çº¿ç¨‹æ¨¡å*ï¼šæ‰€æœ‰I/Oæ“ä½œéƒ½ç”±ä¸€ä¸ªçº¿ç¨‹å®Œæˆï¼Œå³å¤šè·¯å¤ç”¨ã€äº‹ä»¶åˆ†å‘å’Œå¤„ç†éƒæ˜¯åœ¨ä¸€ä¸ªReactorçº¿ç¨‹ä¸Šå®Œæˆçš„ã€‚æ—¢è¦æ¥æ”¶å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±å‘æœåŠ¡ç«¯å‘èµ·è¿æ¥ï¼Œåˆè¦å‘é€è¯»å–è¯·æ±‚æˆ–åº”ç­å“åº”æ¶ˆæ¯ã€‚ä¸€ä¸ªNIO çº¿ç¨‹åŒæ—¶å¤„ç†æˆç™¾ä¸Šåƒçšé“¾è·¯ï¼Œæ€§èƒ½ä¸Šæ— æ³•æ”¯æ’‘ï¼Œé€Ÿåº¦æ…¢ï¼Œè‹¥çº¿ç¨‹è¿›å…¥æ­»å¾ªç¯ï¼Œæ•´ä¸ªç¨‹åºä¸å¯ç”¨ï¼Œå¯¹äºé«˜è´Ÿè½½ã€å¤§å¹¶å‘çš„åº”ç”¨åœºæ™¯ä¸åˆé€‚ã€
- **å¤šçº¿ç¨‹æ¨¡å*ï¼šæœ‰ä¸€ä¸ªNIO çº¿ç¨‹ï¼ˆAcceptorï¼åªè´Ÿè´£ç›‘å¬æœåŠ¡ç«¯ï¼Œæ¥æ”¶å®¢æˆ·ç«¯çšTCP è¿æ¥è¯·æ±‚ï¼›NIO çº¿ç¨‹æ± è´Ÿè´£ç½‘ç»œIO çš„æ“ä½œï¼Œå³æ¶ˆæ¯çš„è¯»å–ã€è§£ç ã€ç¼–ç å’Œ å‘é€ï¼›1 ä¸ªNIO çº¿ç¨‹å¯ä»¥åŒæ—¶å¤„ç†N æ¡é“¾è·¯ï¼Œä½†æ˜¯1 ä¸ªé“¾è·¯åªå¯¹åº”1 ä¸ªNIO çºç¨‹ï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢å‘ç”Ÿå¹¶å‘æ“ä½œé—®é¢˜ã€‚ä½†åœ¨å¹¶å‘ç™¾ä¸‡å®¢æˆ·ç«¯è¿æ¥æˆ–éœ€è¦å®‰å…¨è®¤è¯æ—¶ï¼Œä¸€ä¸ªAcceptor çº¿ç¨‹å¯èƒ½ä¼šå­˜åœ¨æ€§èƒ½ä¸è¶³é—®é¢˜ã€
- **ä¸»ä»å¤šçº¿ç¨‹æ¨¡å*ï¼šAcceptor çº¿ç¨‹ç”¨äºç»‘å®šç›‘å¬ç«¯å£ï¼Œæ¥æ”¶å®¢æˆ·ç«¯è¿æ¥ï¼Œå°† SocketChannel ä»ä¸»çº¿ç¨‹æ± çš„Reactor çº¿ç¨‹çš„å¤šè·¯å¤ç”¨å™¨ä¸Šç§»é™¤ï¼Œé‡æ–°æ³¨å†ŒåˆSub çº¿ç¨‹æ± çš„çº¿ç¨‹ä¸Šï¼Œ ç”¨äºå¤„ç†I/O çš„è¯»å†™ç­‰æ“ä½œï¼Œä»è€Œä¿è¯mainReactoråªè´Ÿ è´£æ¥å…¥è®¤è¯ã€æ¡æ‰‹ç­‰æ“ä½œï¼



#### EventLoopæ˜¯ä»€ä¹ˆï¼Ÿå’ŒReactorçº¿ç¨‹æ¨¡å‹çš„å…³ç³

> ç­”ï¼šEventLoopç›´è¯‘å³äº‹ä»¶è½®è¯¢ï¼Œæ˜¯ä¸€ç§ç”¨äºäº‹ä»¶ç­‰å¾…å’Œå¤„ç†çš„ç¨‹åºæ¨¡å‹ã€‚åœ¨Nettyä¸­ï¼ŒEventLoopå¯ä»¥è®¤ä¸ºæ˜¯Reactor çº¿ç¨‹æ¨¡å‹çš„äº‹ä»¶å¤„ç†å¼•æ“ï¼Œæ¯ä¸ªEventLoopéƒ½ç»´æŠ¤ä¸€ä¸ªSelectorå’ŒTaskQueueï¼Œä¸»è¦è´Ÿè´£å¤„ç†IOäº‹ä»¶ã€æ™®é€šä»»åŠ¡å’Œå®šæ—¶ä»»åŠ¡ã€‚Reactoræ¨èä½¿ç”¨NioEventLoopï¼Œå…¶åº•å±‚åŸºäºJDKçš„Epollå®ç°ï¼Œå¹¶ä¸”é¿å…äº†JDK Epollçš„æ¼æ´ã€‚åœ¨æˆ‘çš„ç†è§£ä¸Šï¼ŒReactorã€EventLoopGroupã€EventLoopã€Channelä¹‹é—´çš„å…³ç³»å¦‚ä¸‹ï¼š
>
> Reactorå¯ä»¥ç®€å•çš„è®¤ä¸ºæ˜¯EventLoopGroupï¼Œä¾‹å¦‚ä¸»ä»Reactorå³æœ‰ä¸¤ä¸ªEventLoopGroupã€
>
> **EventLoopGroupå’ŒEventLoopæ˜¯ä¸€å¯¹å¤š**çš„å…³ç³»ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºçº¿ç¨‹æ± å’Œçº¿ç¨‹çš„å…³ç³»ï¼Œåªä¸è¿‡EventLoopæœ‰å…·ä½“çš„å®ç°ï¼ŒåŒ…æ‹¬è½®è¯¢ï¼ˆSelectorï¼‰è‡ªå·±ç®¡ç†çš„ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTaskQueueï¼‰ï¼Œå¯¹äºä»Reactorï¼Œå…¶EventLoopçš„ä»»åŠ¡é˜Ÿåˆ—å³Channelé˜Ÿåˆ—ï¼Œè½®è¯¢ç›‘å¬Channelçš„IOäº‹ä»¶ï¼Œå¹¶è°ƒç”¨ChannelPipelineä¸­çš„Handlerè¿›è¡Œå¤„ç†ï¼Œæ‰€ä»*EventLoopå’ŒChannelæ˜¯ä¸€å¯¹å¤šçš„å…³ç³*ã€

![image-20220727105052377](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/image-20220727105052377.png)



#### TCP ç²˜åŒ…/æ‹†åŒ…çš„åŸå› åŠè§£å†³æ–¹æ³•ï¼

> ç­”ï¼šTCPæ˜¯ä»¥æµçš„æ–¹å¼æ¥å¤„ç†æ•°æ®ï¼Œä¸€ä¸ªå®Œæ•´çš„åŒ…å¯èƒ½ä¼šè¢«TCPæ‹†åˆ†æˆå¤šä¸ªåŒ…è¿›è¡Œå‘é€ï¼Œä¹Ÿå¯èƒ½æŠŠå°çš„å°è£…æˆä¸€ä¸ªå¤§çš„æ•°æ®åŒ…å‘é€ã€

åŸå› ï¼

- å½“æˆ‘ä»¬çš„æ•°æ®åŒ…å¤§äºTCPåŒ…æ•°æ®å†…å®¹ç©ºé—´ï¼Œåˆ™å‘ç”Ÿæ‹†åŒ…ï¼Œå°äºåˆ™å‘ç”Ÿç²˜åŒ…ã€‚ä¾‹å¦‚ï¼šæœåŠ¡ç«¯å°†ä¸‰ä¸ªæ•°æ®åŒ…è¢«ç»„è£…æˆä¸¤ä¸ªTCPåŒ…å‘é€ï¼Œåˆ™æœåŠ¡ç«¯å‘ç”Ÿäº†ç²˜åŒ…ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°ç²˜åŒ…åˆ™éœ€è¦è¿›è¡Œæ‹†åŒ…å¤„ç†ã€

è§£å†³ï¼

- FixedLengthFrameDecoderï¼šå®šé•¿æ‹†åŒ…å™¨ï¼šåº”ç”¨å±‚åè®®åŒ…ç®€å•ï¼Œæ•°æ®åŒ…é•¿åº¦å›ºå®šï¼Œåˆ™å¯ä»¥ä½¿ç”¨ã€
- LineBasedFrameDecoderï¼šè¡Œæ‹†åŒ…å™¨ï¼šæ•°æ®åŒ…ä»¥æ¢è¡Œç¬¦ä½œä¸ºåˆ†éš”ã€
- DelimiterBasedFrameDecoderï¼šè‡ªå®šä¹‰åˆ†éš”ç¬¦åˆ†å‰²å™¨ï¼šæ˜¯è¡Œæ‹†åˆ†å™¨çš„é€šç”¨ç‰ˆæœ¬ï¼Œå¯ä»¥è‡ªå®šä¹‰æ¢è¡Œç¬¦ã€
- LengthFieldBasedFrameDecoderï¼šåŸºäºé•¿åº¦åŸŸæ‹†åŒ…å™¨ï¼šè‡ªå®šä¹‰çš„åè®®ä¸­åŒ…å«é•¿åº¦åŸŸå­—æ®µï¼Œåˆ™å¯ä»¥ç”¨è¯¥æ‹†åŒ…å™¨ã€





#### ä»€ä¹ˆæ˜¯é›¶æ‹·è´ï¼Œè·Ÿä¼ ç»Ÿæ‹·è´çš„åŒºåˆ«ï¼

- *https://blog.csdn.net/liyifan687/article/details/106749460
- *https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Netty%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%20RPC%20%E5%AE%9E%E8%B7%B5-%E5%AE%8C/16%20%20IO%20%E5%8A%A0%E9%80%9F%EF%BC%9A%E4%B8%8E%E4%BC%97%E4%B8%8D%E5%90%8C%E7%9A%84%20Netty%20%E9%9B%B6%E6%8B%B7%E8%B4%9D%E6%8A%80%E6%9C%AF.md
- *https://www.pdai.tech/md/java/io/java-io-nio-zerocopy.html#%E5%85%B6%E5%AE%83%E7%9A%84%E9%9B%B6%E6%8B%B7%E8%B4%9D%E5%AE%9E%E7%8E%B0
- https://juejin.cn/post/6939881308114354207



**ä»€ä¹ˆæ˜¯é›¶æ‹·è´*

> é›¶æ‹·è´æ˜¯ä¸ªå¹¿ä¹‰ä¸Šçš„æ¦‚å¿µï¼Œå¯ä»¥è®¤ä¸ºåªè¦èƒ½å¤Ÿå‡å°‘ä¸å¿…è¦çš„ CPU æ‹·è´ï¼Œéƒ½å¯ä»¥ç†è§£ä¸ºæ˜¯é›¶æ‹·è´ã€‚å¸¸è§çš„é›¶æ‹·è´ä¼˜åŒ–æœ‰ä»¥ä¸‹ï¼
>
> - æ“ä½œç³»ç»Ÿçº§åˆ«çš„é›¶æ‹·è´
> - ç”¨æˆ·æ€çš„æ•°æ®æ“ä½œä¼˜åŒ–
>
> DMAï¼å…¨ç§°å«ç›´æ¥å†…å­˜å­˜å–ï¼ˆDirect Memory Accessï¼‰ï¼Œæ˜¯ä¸€ç§å…è®¸å¤–å›´è®¾å¤‡ç›´æ¥è®¿é—®ç³»ç»Ÿä¸»å­˜çš„æœºåˆ¶ã€‚DMA æ¥ç®¡äº†æ•°æ®è¯»å†™çš„å·¥ä½œï¼Œä¸éœ€è¦CPU å†å‚ä¸I/O ä¸­æ–­çš„å¤„ç†ï¼Œä»è€Œå‡è½»äº† CPU çš„è´Ÿæ‹…ã€



**ä¸€æ¬¡ä¼ ç»Ÿç£ç›˜IOçš„è¿‡ç¨*

> ç£ç›˜ - å†…æ ¸ - ç”¨æˆ·ç©ºé—´ï¼ˆä¸€æ¬¡è¯»å†™æ—¶å…±æ¶‰åŠäº†4æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼æ¬DMA æ‹·è´ä»¥åŠ2æ¬CPU æ‹·è´ã€‚ï¼‰	

![screen-1535441](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/screen-1535441.png)

- ä¸€æ¬¡ç½‘ç»œIOçš„è¿‡ç¨‹ï¼šwebæœåŠ¡åŒ- å†…æ ¸ - ç”¨æˆ·ç©ºé—´ - ç½‘å¡ï¼ˆå¦‚æœwebæœåŠ¡å™¨æ¶‰åŠç£ç›˜IOï¼Œåˆ™è¿˜éœ€è¦æ·»åŠ ç£ç›˜IOè¿‡ç¨‹ï¼[image-20220705102442286](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/image-20220705102442286.png)



**é›¶æ‹·è´å®ç*

- **ç”¨æˆ·æ€ç›´æ¥IO**ï¼šç”¨æˆ·ç©ºé—´ç›´æ¥è®¿é—®ç¡¬ä»¶è®¾å¤‡ï¼Œé€šè¿‡DMAè¿›è¡Œæ•°æ®ä¼ è¾“

![screen-1535947](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/screen-1535947.png)

- **mmap**ï¼šMMAP æ˜¯æ•°æ®ä¸ä¼šåˆ°è¾¾ç”¨æˆ·ç©ºé—´å†…å­˜ï¼Œåªä¼šå­˜åœ¨äºç³»ç»Ÿç©ºé—´çš„å†…å­˜ä¸Šï¼Œç”¨æˆ·ç©ºé—´ä¸ç³»ç»Ÿç©ºé—´å…±ç”¨åŒä¸€ä¸ªç¼“å†²åŒºï¼Œä¸¤è€…é€šè¿‡æ˜ å°„å…³è”ã€‚ï¼ˆå‘ç”Ÿäº4 æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ + 1 æ¬CPU æ‹·è´ + 2 æ¬DMA æ‹·è´ï¼

![screen-1773287](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/aHR0cDovL2ltZy5sbGM2ODcudG9wL3VQaWMvc2NyZWVuLTE3NzMyODcucG5n)

- **sendfile**ï¼Linux 2.4 ç‰ˆæœ¬å¼€å§‹ï¼Œå‡å°‘äº†å†…æ ¸ç¼“å†²åŒºåˆ°Socketç¼“å†²åŒºçš„ä¸€æ¬¡CPUæ‹·è´ï¼Œé‡‡ç”¨ä¼ è¾“æ•°æ®æè¿°ä¿¡æ¯ï¼Œç”±ç½‘å¡DMAç›´æ¥è¿›è¡Œå†…æ ¸ç¼“å†²åŒºçš„æ•°æ®æ‹·è´ã€‚ä¸ mmap å†…å­˜æ˜ å°„æ–¹å¼ä¸åŒçš„æ˜¯ï¼sendfile() è°ƒç”¨ä¸­æ•°æ®å¯¹ç”¨æˆ·ç©ºé—´æ˜¯å®Œå…¨ä¸å¯è§çš„ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å¯¹nmapçš„ä¼˜åŒ–ã€‚ï¼ˆsendfileåœ¨JDKçš„å°è£…ä¸­å³`FileChannel#transferTo`æ–¹æ³•ï¼

  ![image-20200610154454498](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/image-20200610154454498.png)



**Nettyçš„é›¶æ‹·è´ä¼˜åŒ–**

> Nettyçš„é›¶æ‹·è´æŠ€æœ¯é™¤äº†æ“ä½œç³»ç»Ÿçº§åˆ«çš„åŠŸèƒ½å°è£…ï¼Œæ›´å¤šçš„æ˜¯é¢å‘ç”¨æˆ·æ€çš„æ•°æ®æ“ä½œä¼˜åŒ–ã€

- **å †å¤–å†…å­˜**ï¼šNettyå‘é€å’Œæ¥æ”¶æ¶ˆæ¯ä¸»è¦ä½¿ç”¨bytebufferï¼Œbytebufferä½¿ç”¨å †å¤–å†…å­˜ï¼Œé¿å…JVM å †å†…å­˜åˆ°å †å¤–å†…å­˜çš„æ•°æ®æ‹·è´ã€
- **Composite Buffers**ï¼šä¼ ç»Ÿçš„bytebufferï¼Œå¦‚æœè¦åˆå¹¶ä¸¤ä¸ªbytebufferï¼Œéœ€è¦åˆ›å»ºä¸€ä¸*nå¤§å°çš„æ–°æ•°ç»„ï¼Œå†å°†ä¸¤ä¸ªæ‹·è´åˆ°æ–°æ•°ç»„ä¸­ï¼Œè€ŒComposite Buffersæ²¡æœ‰çœŸæ­£å°†å¤šä¸ªbytebufferç»„åˆèµ·æ¥ï¼Œè€Œæ˜¯ä¿å­˜äº†ä»–ä»¬çš„å¼•ç”¨ã€
- **FileChannel.transferTo**ï¼šNettyåº•å±‚è°ƒç”¨äº†FileChannelçš„transferToæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å³ä¸Šè¿°çš„sendfileæ–¹å¼çš„é›¶æ‹·è´ï¼Œæ˜¯æ“ä½œç³»ç»Ÿçº§åˆ«çš„é›¶æ‹·è´æŠ€æœ¯ã€



---



### Kafka



Kafkaç”¨åœ¨ä»€ä¹ˆåœºæ™¯ï¼Ÿ

- Kafkaç”¨äºæ¥æ”¶æƒ…æŠ¥æ¿ã€å¡å£è½¦è¾†æŠ“æ‹ä¿¡æ¯åŠå…¶ä»–è®¾å¤‡é‡‡é›†çš„æ¶ˆæ¯ï¼Œç”¨äºä¸ç³»ç»ŸæœåŠ¡çš„è§£è€¦ï¼Œå¯ç”¨åšæµé‡æ§åˆ
- æƒ…æŠ¥æ¿å‘é€éœ€è¦ä¿è¯*æœ‰åºæ€*ï¼Œé˜²æ­¢æƒ…æŠ¥æ¿è¦†ç›–ï¼Œé‡‡ç”¨æƒ…æŠ¥æ¿codeä½œä¸ºpartitionKeyï¼Œé˜²æ­¢ä¹±åºå¯¼è‡´çš„è¦†ç›–é—®é¢˜ã€
- å¡å£æ•°æ®æ¥æ”¶éœ€è¦*é˜²æ­¢æ¶ˆæ¯ä¸¢å¤±**ï¼Œé‡‡ç”¨æ‰‹åŠ¨ackæœºåˆ¶ï¼Œä¿è¯ä¸šåŠ¡æ­£å¸¸åå†æäº¤ackã€
- Kafkaé‡‡ç”¨æœ€å¤§åŠªåŠ›é€šçŸ¥é…ç½®ï¼ŒBASEç†è®ºï¼ŒæŸ”æ€§äº‹åŠ¡æœ€ç»ˆä¸€è‡´æ€§ã€
  - PCMé‡‡ç”¨æœ€å¤§åŠªåŠ›é€šçŸ¥ï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰ï¼šæ¶ˆæ¯å¼‚æ­¥å‘é€ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°ackï¼Œåˆ™é‡å¤å‘é€ï¼Œæœ¬åœ°é‡å¤å¤±è´¥åå‘é€åˆ°Exception Queueï¼Œç”±Exception Queueå†éš”ä¸€æ®µæ—¶é—´è¿›è¡Œå‘é€ï¼Œå¹¶ä¸”ä¼šé‚®ä»¶é€šçŸ¥ç›¸å…³äººå‘˜æ’æŸ¥ã€
    - https://juejin.cn/post/7023620718692663326

  - æœåŠ¡åŒºé‡‡ç”¨æœ¬åœ°æ¶ˆæ¯è¡¨ï¼šå‘å¸ƒæƒ…æŠ¥æ¿åï¼Œå¼‚æ­¥è¿”å›å‘å¸ƒæˆåŠŸï¼Œç”±äºæ¶ˆæ¯å¯èƒ½ä¼šä¸¢å¤±ï¼ˆå‘é€ç«¯ã€ä¼ è¾“è¿‡ç¨‹ç­‰ï¼‰ï¼Œæ•…é‡‡ç”¨æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œäº‹åŠ¡æ’å…¥å‘å¸ƒè®°å½•åŠå‘å¸ƒçš„æ¶ˆæ¯ï¼ˆæ¶ˆæ¯åŠå…¶çŠ¶æ€ï¼‰ï¼Œå¦‚æœæ¶ˆæ¯è¢«æ­£å¸¸å¤„ç†åï¼Œåˆ™è¿”å›æ‰§è¡Œç»“æœä¿®æ”¹æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­çš„å‘å¸ƒçŠ¶æ€ã€‚ç”±äºå®šæ—¶ä»»åŠ¡ä¼šå®šæ—¶æ£€æµ‹æ¶ˆæ¯çŠ¶æ€ï¼Œå¦‚æœå‘å¸ƒå¤±è´¥ï¼Œåˆ™é‡æ–°å‘é€ã€
    - https://juejin.cn/post/6844904041659498509

- Kafkaçš„é‡å¤æ¶ˆè´¹é—®é¢˜ï¼šå¹‚ç­‰æ€§å¤„ç
  - https://juejin.cn/post/7002778713943343117
- *Kafkaæ€§èƒ½ã€å¯é æ€§é—®é¢
  - https://juejin.cn/post/7018702635544870948
- Kafkaæ‰«ç›²
  - https://juejin.cn/post/7012815379772768264#heading-3



ç›®å‰ç³»ç»Ÿå¯èƒ½å­˜åœ¨çš„é—®é¢˜ï¼š

1. å¦‚æœå¡å£è½¦è¾†è¿›å…¥åï¼Œä¸šåŠ¡ä»£ç å¼‚å¸¸ï¼Œå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿï¼ˆè½¦è¾†å®é™…è¿›å»äº†ï¼Œä½†æ˜¯è½¦ä½å ç”¨æ•°æ®æ²¡æœ‰å½•å…¥ï¼Œå¹¶ä¸”å¡å£æ¶ˆæ¯è¢«æ¶ˆè´¹äº†ï¼‰
   1. å¼€å¯æ‰‹åŠ¨ackæœºåˆ¶ï¼Œä¸šåŠ¡å®Œæˆåå†ackï¼Œé˜²æ­¢æ¶ˆæ¯ä¸¢å¤
   2. é‡å¤æ¶ˆè´¹é—®é¢˜ï¼šrediså¹‚ç­‰å¤„ç†ï¼Œæ•°æ®åº“å”¯ä¸€é”®å¤„ç
2. å¦‚æœå‰é¢æ­£å¸¸ï¼Œä½†æ˜¯åœ¨å‘å¸ƒæƒ…æŠ¥æ¿çš„æ—¶å€™å¼‚å¸¸ï¼Œå¯¼è‡´æ¶ˆæ¯æ²¡å‘é€å‡ºå»ï¼Œå¦‚ä½•å¤„ç†ï¼
   1. é‡‡ç”¨æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œå­˜å‚¨æ¶ˆæ¯çŠ¶æ€ï¼Œå®šæ—¶ç›‘æµ‹æ¶ˆæ¯çŠ¶æ€ï¼Œè‹¥æ¶ˆæ¯çŠ¶æ€æœªæ­£å¸¸æ›´æ–°ï¼Œåˆ™é‡æ–°å‘é€æ¶ˆæ¯ï¼Œä¸‹æ¸¸ä¿è¯å¹‚ç­‰æ€§å¤„ç†ï¼Œæœ¬åœ°æ¶ˆæ¯è¡¨å¯ä»¥é˜²æ­¢æ¶ˆæ¯ä¸¢å¤±ï¼Œä¿è¯æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ã€



æ‰‹åŠ¨æäº¤ackå’Œæœ¬åœ°æ¶ˆæ¯è¡¨çš„åŒºåˆ«ï¼š

- æ‰‹åŠ¨æäº¤ackä¸»è¦ç”¨äºé˜²æ­¢ä¸šåŠ¡å¼‚å¸¸å¯¼è‡´æ¶ˆæ¯æ²¡æœ‰è¢«æ­£å¸¸æ¶ˆè´¹çš„é—®é¢˜ï¼Œè€Œä¸èƒ½ä¿è¯æ¶ˆæ¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„å…¶ä»–é—®é¢˜ï¼ˆä¾‹å¦ä¸Šæ¸¸æœåŠ¡å®•æœºå¯¼è‡´æ¶ˆæ¯æ²¡æœ‰è¢«å‘é€ã€MQå®•æœºå¯¼è‡´æ¶ˆæ¯ç›´æ¥ä¸¢å¤±ç­‰çš„é—®é¢˜ï¼ŒMQå¯ä»¥æœ‰å‰¯æœ¬æœºåˆ¶ï¼Œä½†æ˜¯ä¹Ÿæ˜¯æœ€å¤§ç¨‹åº¦çš„å»é¿å…ä¸¢å¤±é—®é¢˜ï¼‰
  - æœåŠ¡åŒºåº”ç”¨ï¼šå¡å£è½¦è¾†é€šè¿‡æ‰‹åŠ¨ackï¼Œé˜²æ­¢ä¸šåŠ¡å¼‚å¸¸å¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ï¼Œè¿›è€Œå¯¼è‡´è½¦è¾†å‡ºå…¥å¡å£æ•°æ®ä¸èƒ½è¢«æ›´æ–°ï¼Œåœè½¦ä½è¯†åˆ«å‡ºç°é—®é¢˜ã€
- æœ¬åœ°æ¶ˆæ¯è¡¨åˆ™å¯ä»¥ç¡®ä¿**æœ€ç»ˆä¸€è‡´æ€§åŸåˆ*ï¼ˆæ— è®ºå¦‚ä½•éƒ½ä¼šå¯ä»¥ä¿è¯æ•°æ®æœ€ç»ˆä¸€è‡´ï¼‰ï¼Œå› ä¸ºå…¶åŸç†æ˜¯åœ¨å…¥å£å¤„å°±ä¿å­˜äº†è¯·æ±‚ï¼Œä¾‹å¦‚æ”¯ä»˜åå…ˆé€šè¿‡äº‹åŠ¡ã€æ‰§è¡Œæ”¯ä»˜ä¸šåŠ¡å¹¶æ’å…¥æœ¬åœ°æ¶ˆæ¯è¡¨ã€‘ï¼Œç„¶åå‘é€æ”¯ä»˜æ¶ˆæ¯åˆ°MQï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡ç›‘æ§æœ¬åœ°æ¶ˆæ¯è¡¨ä¿è¯åç»­ä¸šåŠ¡æ­£å¸¸æ‰§è¡Œï¼ˆåç»­ä¸šåŠ¡æ‰§è¡ŒæˆåŠŸåä¼šå‘MQåšç¡®è®¤ï¼‰ï¼Œå‘ç°è¿˜æ²¡æœ‰å®Œæˆåˆ™é‡æ–°å‘é€MQï¼Œå› æ­¤å­˜åœ¨é‡å¤æ¶ˆè´¹é—®é¢˜ï¼Œéœ€è¦å¯¹æ¥å£åšå¹‚ç­‰å¤„ç†ã€
  - æœåŠ¡åŒºåº”ç”¨ï¼šæƒ…æŠ¥æ¿å‘å¸ƒåæ’å…¥æƒ…æŠ¥æ¿ç›¸å…³ä¸šåŠ¡æ•°æ®ï¼Œéœ€è¦å‘é€æƒ…æŠ¥æ¿æ›´æ–°çš„æ¶ˆæ¯åˆ°å¦ä¸€ä¸ªæœåŠ¡è¿›è¡Œå¯¹æ¥æ›´æ–°ï¼Œå¦‚æœæ¶ˆæ¯åœ¨è¿‡ç¨‹ä¸¢å¤±ï¼Œå°†ä¼šå‡ºç°æƒ…æŠ¥æ¿å·²ç»å‘å¸ƒä½†æ˜¯æ²¡æœ‰æ›´æ–°çš„æƒ…å†µï¼Œå› æ­¤å¼•å…¥æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œäº‹åŠ¡ã€æ‰§è¡Œä¸šåŠ¡æ•°ææ’å…¥æœ¬åœ°æ¶ˆæ¯è¡¨ã€‘ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡æŸ¥çœ‹è¯¥æ¡æ¶ˆæ¯å¯¹åº”çš„éœ€è¦æ›´æ–°çš„ä¸šåŠ¡æ˜¯å¦å·²ç»å®Œæˆï¼Œæ²¡æœ‰å®Œæˆåˆ™é‡æ–°å‘é€ã€



## Java

### Javaå¹¶å‘ç¼–ç¨‹



#### çº¿ç¨‹ï¼ˆåˆ›å»ºã€çŠ¶æ€ã€ä¸­æ–­ã€park/wait/sleepï¼

1. Javaä¸­çº¿ç¨‹çš„çŠ¶æ€æœ‰å“ªäº›ï¼

> Javaä¸­çº¿ç¨‹çŠ¶æ€æœ‰6ç§ï¼Œåˆ†ä¸ºæ˜¯newã€runableã€blockedã€waitingã€time-waitingã€terminalã€

![image-20220706111105500](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images/image-20220706111105500.png)

1. åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿå…³é—­çº¿ç¨‹çš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ

> æœ¬è´¨ä¸Šçº¿ç¨‹çš„åˆ›å»ºæ–¹å¼åªæœ‰ä¸€ç§ï¼Œå³new Threadï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼ŒJavaåˆæä¾›äº†å¤šç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼
>
> - ç»§æ‰¿Thread
> - å®ç°Runnableæ¥å£
> - å®ç°Callableæ¥å£
> - çº¿ç¨‹æ± åˆ›å»
>
> çº¿ç¨‹ä¸­æ–­ï¼
>
> - https://juejin.cn/post/6844903477894709261
>
> **æŠ¢å å¼ä¸­æ–*ï¼šçº¿ç¨‹æä¾›äº†stopæ–¹å¼å…³é—­çº¿ç¨‹ï¼Œä½†æ˜¯è¯¥æ–¹æ³•è¢«æ ‡å¿—ä¸ºè¿‡æœŸæ–¹æ³•ï¼Œä¸æ¨èä½¿ç”¨ï¼Œç†ç”±æ˜¯è¯¥æ–¹æ³•è°ƒç”¨åä¼šç¦»åœ°è·‘å‡ºThreadDeathå¼‚å¸¸ï¼Œå¼ºåˆ¶é‡Šæ”¾è¯¥çº¿ç¨‹æŒæœ‰çš„èµ„æºï¼Œå¦‚æœæ˜¯åœ¨åŒæ­¥ä»£ç å—ä¸­é—´ä½ç½®è¢«æ‰§è¡Œï¼Œä¼šå¯¼è‡´æ— æ³•ç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§ï¼ˆä¸€è‡´æ€§ï¼‰ã€
>
> **åä½œå¼ä¸­æ–*ï¼šæ­£ç¡®çš„å…³é—­çº¿ç¨‹æ˜¯ç”¨Theadçš„interruptæ–¹æ³•ï¼ŒJDKå¼€å‘äººå‘˜è®¤ä¸ºç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹çš„æ—¶æœºåº”è¯¥ç”±çº¿ç¨‹æœ¬èº«ç¡®å®šï¼Œè€Œä¸æ˜¯ç”±å…¶ä»–çº¿ç¨‹å†³å®šï¼Œæ‰€ä»¥interruptæ–¹æ³•åªæ˜¯å°†çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€æ ‡å¿—è®¾ç½®ä¸ºtrueï¼Œç”±çº¿ç¨‹æœ¬èº«å»è½®è¯¢æ£€æµ‹è¯¥æ ‡è¯†ï¼Œå¹¶åœ¨åˆé€‚çš„æ—¶æœºç»“æŸçº¿ç¨‹ã€
>
> æœ‰äº†ä¸­æ–­æ ‡è¯†åï¼Œè‡ªç„¶ä¹Ÿéœ€è¦æœ‰ä¸­æ–­ç­–ç•¥ï¼Œè€Œä¸­æ–­ç­–ç•¥å¯ä»¥åœ¨JVMå±‚é¢ä¹Ÿå¯ä»¥åœ¨Javaå±‚åšå®ç°ï¼Œä¾‹å¦‚JVMå°†Threadçš„wait()ã€sleep()ã€join()ç­‰æ–¹æ³•éƒ½å®ç°ä¸­æ–­æ ‡è¯†çš„è½®è¯¢æ“ä½œï¼Œé¿å…ç”±äºé˜»å¡è€Œçº¿ç¨‹æ— æ³•è¢«ä¸­æ–­ã€

2. å®ˆæŠ¤çº¿ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ

> å®ˆæŠ¤çº¿ç¨‹å³æœåŠ¡äºç”¨æˆ·çº¿ç¨‹çš„çº¿ç¨‹ï¼Œ**æ‹¥æœ‰è‡ªåŠ¨ç»“æŸè‡ªå·±ç”Ÿå‘½å‘¨æœŸçš„ç‰¹æ€§ï¼Œè€Œéå®ˆæŠ¤çº¿ç¨‹ä¸å…·å¤‡è¿™ä¸ªç‰¹ç‚*ã€‚é€šè¿‡setDaemon(true)è®¾ç½®ã€
>
> ä¾‹å¦‚åœ¨ä¸»çº¿ç¨‹ä¸­å¼€å¯æ–°çº¿ç¨‹æ‰“å°ï¼Œä¸»çº¿ç¨‹ç»“æŸåï¼ŒJVMçº¿ç¨‹ä»ç„¶ä¸ä¼šç»“æŸï¼Œè€Œæ˜¯ä¼šç­‰å¾…å·¥ä½œçº¿ç¨‹ï¼ˆå­çº¿ç¨‹ï¼‰æ‰“å°å®Œåç»“æŸï¼›å¯¹äºå®ˆæŠ¤çº¿ç¨‹çš„æ‰“å°ï¼Œå¦‚æœä¸»çº¿ç¨‹é€€å‡ºåï¼ŒJVMçº¿ç¨‹ä¼šç›´æ¥ç»“æŸï¼Œè€Œä¸ä¼šç­‰å¾…å®ˆæŠ¤çº¿ç¨‹è¾“å‡ºæ‰“å°ç»“æœï¼Œå³å®ˆæŠ¤çº¿ç¨‹çš„ä¼˜å…ˆçº§æ˜¯æ¯”è¾ƒä½çš„ï¼Œæ²¡æœ‰å·¥ä½œçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šç‰¹åœ°ç­‰å¾…å…¶æ‰“å°ã€
>
> å…¸å‹çš„å®ˆæŠ¤çº¿ç¨‹å¦‚Javaç§çš„åƒåœ¾å›æ”¶çº¿ç¨‹ã€‚åœ¨JVMä¸­ï¼Œæ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹éƒ½æ‰§è¡Œå®Œæ¯•åï¼Œæ— è®ºæœ‰æ²¡æœ‰å®ˆæŠ¤çº¿ç¨‹ï¼Œè™šæ‹Ÿæœºéƒ½ä¼šè‡ªåŠ¨é€€å‡ºã€

3. çº¿ç¨‹ã€è¿›ç¨‹å’Œåç¨‹çš„åŒºåˆ
   1. ä¸ºä»€ä¹ˆåç¨‹çš„æ€§èƒ½å¥½ï¼ˆGOï¼

> ä¸¤è€…çš„æœ¬è´¨åŒºåˆ«æ˜¯ï¼šæ˜¯å¦å•ç‹¬å æœ‰å†…å­˜ç©ºé—´åŠå…¶ä»–ç³»ç»Ÿèµ„æºï¼ˆå¦‚IOï¼
>
> 1. æœ¬è´¨ï¼šè¿›ç¨‹æ˜¯ç³»ç»Ÿåˆ†é…èµ„æºçš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯CUPè°ƒåº¦å’Œæ‰§è¡Œçš„æœ€å°å•ä½ã€
> 2. åˆ‡æ¢å¼€é”€ï¼šè¿›ç¨‹çš„åˆ›å»ºå’Œé”€æ¯ä¸ä»…éœ€è¦ä¿å­˜å¯„å­˜å™¨å’Œæ ˆä¿¡æ¯ï¼Œè¿˜éœ€è¦èµ„æºçš„åˆ†é…å›æ”¶åŠé¡µè°ƒåº¦ï¼Œå¼€é”€è¾ƒå¤§ï¼›çº¿ç¨‹åªéœ€è¦ä¿æŒæ ˆä¿¡æ¯å’Œå¯„å­˜å™¨ï¼Œå¼€é”€è¾ƒå°ã€
> 3. ç¨³å®šæ€§ï¼šè¿›ç¨‹é—´å•ç‹¬å æœ‰å†…å­˜ï¼Œå³å­˜åœ¨å†…å­˜éš”ç¦»ï¼Œè€Œçº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ï¼ŒåŒä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ï¼Œæ‰€ä»¥è¿›ç¨‹é—´çš„å´©æºƒä¸ä¼šç›¸äº’å½±å“ï¼Œä½†æ˜¯è¿›ç¨‹å†…æŸä¸ªçº¿ç¨‹çš„å´©æºƒä¼šå½±å“åˆ°å…¶ä»–çº¿ç¨‹ã€
> 4. å®‰å…¨æ€§ï¼šç”±äºè¿›ç¨‹é—´å†…å­˜ç›¸äº’éš”ç¦»ï¼Œæ‰€ä»¥è¿›ç¨‹é€šä¿¡æ¯”è¾ƒå›°éš¾ä½†æ˜¯è®¿é—®å®‰å…¨ï¼Œè€Œçº¿ç¨‹ç”±äºå…±äº«åŒå—å†…å­˜ï¼Œé€šä¿¡å®¹æ˜“ï¼Œä½†æ˜¯åœ¨å¹¶å‘ä¸‹ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€
>
> åç¨‹ï¼
>
> - å±äºçº¿ç¨‹ï¼Œå…¶æ²¡æœ‰ä¸Šä¸‹æ–‡çš„åˆ‡æ¢çš„æ¶ˆè€—ï¼Œåç¨‹çš„è°ƒåº¦åˆ‡æ¢æ˜¯ç”±ç¨‹åºå‘˜æ‰‹åŠ¨åˆ‡æ¢çš„ã€
> - åŸå­æ€§æ“ä½œï¼Œç”±äºåç¨‹æ˜¯ç”¨æˆ·è°ƒåº¦çš„ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°æ‰§è¡Œä¸€åŠçš„ä»£ç ç‰‡æ®µè¢«å¼ºåˆ¶ä¸­æ–­äº†ï¼Œå› æ­¤æ— éœ€åŸå­æ“ä½œé”ã€

4. *çº¿ç¨‹ã€è¿›ç¨‹çš„ä¸­æ–­è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼

- https://mp.weixin.qq.com/s/pKdQu74Sl3PIaKyDlIEExg
- *https://juejin.cn/post/7023773498543702029
- *https://juejin.cn/post/7025201232151052301

> å†…ä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰ï¼šç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºçš„å¼‚å¸¸ï¼ˆå¤„ç†å™¨åŠå†…å­˜ä»¥å†…äº§ç”Ÿçš„ä¸­æ–­ï¼Œå¯ä»¥å¼•å‡ºçº¿ç¨‹é€šè¿‡ä¸­æ–­å…³é—­ï¼
>
> å¤–ä¸­æ–­ï¼šå¤„ç†å™¨å’Œå†…å­˜ä»¥å¤–çš„éƒ¨ä»¶å¼•èµ·çš„ä¸­æ–­ã€IOè®¾å¤‡å‘å‡ºçš„ä¸­æ–­ã€å¤–éƒ¨ä¿¡å·ä¸­æ–­[ESCé”®]ã€å„ç§å®šæ—¶å™¨å¼•èµ·çš„ä¸­æ–­ã€
>
> æ—¶é—´ç‰‡ä¸­æ–­ï¼šä¿å­˜çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼Œåˆ‡æ¢è‡³å…¶ä»–çº¿ç¨‹è¿›è¡Œæ“ä½
>
> 
>
> è¿›ç¨‹/çº¿ç¨‹ä¸­æ–­è¿‡ç¨‹ï¼ˆæ—¶é—´ç‰‡ä¸­æ–­ï¼‰ï¼š
>
> - ï¼ˆå½“å‰çº¿ç¨‹æ—¶é—´ç‰‡ç”¨å®Œåï¼‰
> - å…³ä¸­æ–­ï¼šé¿å…å…¶ä»–é«˜çº§ä¸­æ–­å¯¼è‡´ç°åœºä¿å­˜ä¸å®Œæ•
> - ä¿å­˜ç°åœºå’Œå±è”½å­—ï¼šå¦‚ç¨‹åºè®¡æ•°å™¨ç­‰
> - å¼€ä¸­æ–­
> - æ‰§è¡Œä¸­æ–­æœåŠ¡ç¨‹åº
> - ï¼ˆæ‰§è¡Œå®Œä¸­æ–­ç¨‹åºåï¼‰
> - å…³ä¸­æ–
> - æ¢å¤ç°åœºå’Œå±è”½å­—ï¼šå°†è¢«ä¸­æ–­çš„ç¨‹åºæ¢å¤åˆ°åŸæ¥çš„çŠ¶æ€
> - å¼€ä¸­æ–­ï¼Œä¸­æ–­è¿”å›ï¼šä¸­æ–­æœåŠ¡ç¨‹åºçš„æœ€åä¸€æ¡æŒ‡ä»¤é€šå¸¸æ˜¯ä¸€æ¡ä¸­æ–­è¿”å›æŒ‡ä»¤ï¼Œä½¿è¢«ä¸­æ–­ç¨‹åºè¿”å›åˆ°åŸç¨‹åºçš„æ–­ç‚¹å¤„ï¼Œä»¥ä¾¿ç»§ç»­æ‰§è¡Œä»»åŠ¡ã€

5. è¯´è¯´Thread.sleep()ã€Object.wait()ã€Condition.await()ã€LockSupport.park()çš„åŒºåˆ«åŒºåˆ«ï¼ˆå¼•å‡ºçº¿ç¨‹é—´çŠ¶æ€çš„å˜æ¢ï¼

- https://www.pdai.tech/md/java/thread/java-thread-x-lock-LockSupport.html#threadsleep%E5%92%8Cobjectwait%E7%9A%84%E5%8C%BA%E5%88%AB

>Thread.sleep()å’ŒObject.wait()çš„åŒºåˆ«ï¼šï¼ˆé”é‡Šæ”¾ã€è¶…æ—¶æ—¶é—´ï¼‰
>
>- Thread.sleep()é‡Šæ”¾CPUï¼Œä¸ä¼šé‡Šæ”¾å æœ‰çš„é”ï¼ŒObject.wait()ä¼šé‡Šæ”¾CPUåŠå æœ‰çš„é”ï¼›
>- Thread.sleep()å¿…é¡»ä¼ å…¥æ—¶é—´ï¼ŒObject.wait()å¯ä¼ å¯ä¸ä¼ ï¼Œä¸ä¼ è¡¨ç¤ºä¸€ç›´é˜»å¡ä¸‹å»ï¼›
>- Thread.sleep()åˆ°æ—¶é—´äº†ä¼šè‡ªåŠ¨å”¤é†’ï¼Œç„¶åç»§ç»­æ‰§è¡Œï¼
>- Object.wait()ä¸å¸¦æ—¶é—´çš„ï¼Œéœ€è¦å¦ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨Object.notify()å”¤é†’ï¼
>- Object.wait()å¸¦æ—¶é—´çš„ï¼Œå‡å¦‚æ²¡æœ‰è¢«notifyï¼Œåˆ°æ—¶é—´äº†ä¼šè‡ªåŠ¨å”¤é†’ï¼Œè¿™æ—¶åˆåˆ†å¥½ä¸¤ç§æƒ…å†µï¼Œä¸€æ˜¯ç«‹å³è·å–åˆ°äº†é”ï¼Œçº¿ç¨‹è‡ªç„¶ä¼šç»§ç»­æ‰§è¡Œï¼›äºŒæ˜¯æ²¡æœ‰ç«‹å³è·å–é”ï¼Œçº¿ç¨‹è¿›å…¥åŒæ­¥é˜Ÿåˆ—ç­‰å¾…è·å–é”ï¼
>
>å…¶å®ï¼Œä»–ä»¬ä¿©æœ€å¤§çš„åŒºåˆ«å°±æ˜¯Thread.sleep()ä¸ä¼šé‡Šæ”¾é”èµ„æºï¼ŒObject.wait()ä¼šé‡Šæ”¾é”èµ„æºã€
>
>
>
>LockSupportæ ¸å¿ƒç±»ï¼š**AQSæ¡†æ¶å€ŸåŠ©äºä¸¤ä¸ªç±»ï¼šUnsafe(æä¾›CASæ“ä½œ)å’ŒLockSupport(æä¾›park/unparkæ“ä½œï¼Œåº•å±‚è°ƒç”¨çš„ä»ç„¶æ˜¯Unsafeç±**
>
>Object.wait()å’ŒLockSupport.park()çš„åŒºåˆ«ï¼š
>
>- ä½œç”¨åŸŸï¼šObject.wait()æ–¹æ³•éœ€è¦åœ¨synchronizedå—ä¸­æ‰§è¡Œï¼ŒLockSupport.park()å¯ä»¥åœ¨ä»»æ„åœ°æ–¹æ‰§è¡Œï¼›
>
>- èµ„æºé‡Šæ”¾ï¼šObject.wait()é‡Šæ”¾é”å’ŒCPUèµ„æºï¼ŒLockSupport.park()é‡Šæ”¾CPUä¸é‡Šæ”¾é”ï¼
>
>- ä¸­æ–­å¤„ç†ï¼šObject.wait()æ–¹æ³•å£°æ˜æŠ›å‡ºäº†ä¸­æ–­å¼‚å¸¸ï¼Œè°ƒç”¨è€…éœ€è¦æ•è·æˆ–è€…å†æŠ›å‡ºï¼ŒLockSupport.park()ä¸éœ€è¦æ•è·ä¸­æ–­å¼‚å¸¸ï¼ˆé˜»å¡è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°ä¸­æ–­ä¼šç›´æ¥è¿”å›ï¼‰ï¼›
>
>- å”¤é†’å¤„ç†ï¼šwait-notify/notifyAllï¼ˆæœ‰é¡ºåºè¦æ±‚ï¼Œnotifyåéœ€è¦è·å–é”ï¼Œå¹¶ä¸”notifyæ˜¯éšæœºå”¤é†’çš„ï¼‰ï¼Œpark-unparkï¼ˆäºŒå…ƒä¿¡å·é‡ï¼Œç±»ä¼¼äºè®¸å¯è¯ï¼Œæ— é¡ºåºè¦æ±‚ï¼Œç”±äºä¸é‡Šæ”¾é”ï¼Œæ‰€ä»¥unparkåç«‹åˆ»æ‰§è¡Œï¼Œunparkå¯ä»¥æ‰§è¡Œå”¤é†’çš„çº¿ç¨‹ï¼‰
>
>  
>
>Object.wait()å’ŒCondition.await()çš„åŒºåˆ«ï¼š
>
>ä¸¤è€…å®ç°äº†ç›¸åŒçš„é˜»å¡åŠŸèƒ½ï¼Œä¸è¿‡åº•å±‚å®ç°ä¸åŒï¼ŒCondition.await()åº•å±‚æ˜¯å…ˆé‡Šæ”¾é”ï¼Œç„¶åè°ƒç”¨LockSupport.park()æ¥å®ç°é˜»å¡å½“å‰çº¿ç¨‹çš„ã€‚æ‰€ä»¥ä¸¤è€…åŠŸèƒ½ä¸€è‡´ï¼Œä¸è¿‡Condition.await()æ‹¥æœ‰LockSupport.park()çš„ç‰¹æ€§ï¼Œå¯ä»¥ä½œç”¨åœ¨ä»»ä½•ä½ç½®ã€



#### å¤šçº¿ç¨‹ï¼ˆçº¿ç¨‹å®‰å…¨ã€çº¿ç¨‹æ± ã€çº¿ç¨‹é€šä¿¡ï¼

1. æ€æ ·ç†è§£çº¿ç¨‹å®‰å…¨ï¼

> çº¿ç¨‹å®‰å…¨å³å½“å¤šä¸ªçº¿ç¨‹è®¿é—®æŸä¸ªå¯¹è±¡æ—¶ï¼Œä¸éœ€è¦è€ƒè™‘è¿è¡Œç¯å¢ƒä¸‹çš„è°ƒåº¦ã€å¹¶å‘ï¼Œä¹Ÿä¸éœ€è¦åšé¢å¤–çš„åŒæ­¥æ“ä½œï¼Œè€Œè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„è¡Œä¸ºéƒ½å¯ä»¥å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¾¿æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä½†æ˜¯åœ¨å®é™…çš„å¤šçº¿ç¨‹å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜ã€
>
> å¸¸è§çš„çº¿ç¨‹å®‰å…¨åœºæ™¯ï¼š
>
> - å¹¶å‘ä¿®æ”¹å…±äº«å˜é‡ï¼Œå…ˆè¯»åä¿®æ”¹ï¼ˆä¾‹å¦‚i++ï¼
> - å¹¶å‘if-thenï¼ˆä¾èµ–æ—¶åºï¼Œä¾‹å¦‚å•ä¾‹ï¼
> - ä¸åŒæ•°æ®é—´å­˜åœ¨ç»‘å®šå…³ç³»ï¼ˆä¾‹å¦‚IPå’Œç«¯å£ï¼Œå¯¹äºè¿™éƒ¨åˆ†çš„ä¿®æ”¹å’Œè®¿é—®éœ€è¦ä¿è¯å…¶åŸå­æ€§ï¼Œä¸èƒ½ä¿®æ”¹éƒ¨åˆ†å°±è¢«è®¿é—®ï¼

2. *çº¿ç¨‹çš„åŒæ­¥æ–¹å¼ï¼ˆçº¿ç¨‹åŒæ­¥å³åŒä¸ªæ—¶é—´æŸä»½ä»£ç åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼‰

>çº¿ç¨‹å®‰å…¨çš„æ–¹æ¡ˆï¼š
>
>äº’æ–¥åŒæ­¥ï¼ˆæ‚²è§‚é”ï¼
>
>- Synchronized
>- ReentrantLock
>
>éé˜»å¡åŒæ­¥ï¼ˆä¹è§‚é”ï¼Œé¿å…é˜»å¡å’Œå”¤é†’ï¼Œå†…æ ¸-ç”¨æˆ·æ€çš„åˆ‡æ¢è€Œå¯¼è‡´çš„èµ„æºæ¶ˆè€—ï¼Œé€‚åˆç«äº‰ä¸æ¿€çƒˆçš„åœºæ™¯ï¼Œéœ€è¦ç‰ºç‰²éƒ¨åˆ†CPUï¼‰ï¼š
>
>- CASï¼ˆæ¯”è¾ƒä¿®æ”¹å‰åçš„é¢„æœŸå€¼æ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´åˆ™è¯´æ˜è¢«ä¿®æ”¹ï¼Œä¼šæœ‰ABAé—®é¢˜ï¼Œæ‰€ä»¥åŠ å…¥ç‰ˆæœAtomicStampedReferenceï¼
>- AtomicIntegerã€AtomicDoubleï¼ˆJUCåŒ…ä¸­ä½¿ç”¨Unsafeç±»å®ç°CASï¼
>
>æ— åŒæ­¥æ–¹æ¡
>
>- æ ˆå°é—­ï¼ˆå±€éƒ¨å˜é‡ï¼‰
>- çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼ˆThreadLocalï¼
>- æ— çŠ¶æ€ä»£ç ï¼ˆåªæä¾›è¿ç®—ï¼Œä¸æä¾›æ•°æ®å­˜å‚¨ï¼‰

3. *çº¿ç¨‹é—´çš„å¦‚ä½•è¿›è¡Œé€šä¿¡ï¼
   - *https://juejin.cn/post/7004401589385609246
   - https://juejin.cn/post/6844904066905014285#heading-9

> - Object.wait-notify/notifyAllï¼šæ§åˆ¶ä¸¤ä¸ªçº¿ç¨‹äº¤å‰æ‰§è¡Œï¼Œä¾‹å¦‚Aå…ˆæ‰§è¡Œä¸€éƒ¨åˆ†ï¼Œå†æ‰§è¡ŒBï¼Œå†æ‰§è¡ŒAå‰©ä¸‹çš„éƒ¨åˆ†ï¼ˆlock.wait()ï¼
>
> - LockSupport.park-unpark
>
> - Thread.joinï¼šä¸¤ä¸ªçº¿ç¨‹å…ˆåæ‰§è¡
>
> - CountdownLatchï¼šçº¿ç¨‹Dåœ¨çº¿ç¨‹Aã€Bã€Cæ‰§è¡Œå®Œåæ‰§è¡Œï¼ˆå…¶ä¸­ABCåŒæ—¶æ‰§è¡Œï¼
>
>   - åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ï¼Œ `CountdownLatch countDownLatch = new CountDownLatch(3)`;
>   - è°ƒç”¨`countDownLatch.await()`è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°è®¡æ•°å€¼å˜ä¸ï¼
>   - åœ¨å…¶ä»–çº¿ç¨‹è°ƒç”¨`countDownLatch.countDown()`ï¼Œè¯¥æ–¹æ³•ä¼šå°†è®¡æ•°å€¼å‡ä¸€ï¼
>   - å½“è®¡æ•°å™¨çš„å€¼å˜ä¸`0` æ—¶ï¼Œ`countDownLatch.await()`ç­‰å¾…çº¿ç¨‹ä¸­çš„æ–¹æ³•ä¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç ã€
>
> - CyclicBarrierï¼šçº¿ç¨‹ABCåœ¨å‡†å¤‡å¥½ååŒæ—¶æ‰§è¡Œï¼ˆå³çº¿ç¨‹é—´ç›¸äº’ç­‰å¾…ï¼‰ã€‚CountdownLatchåˆ™é€‚åˆä¸€ç­‰å¤šçš„åœºæ™¯ã€
>
>   - é¦–å…ˆåˆ›å»ºä¸€ä¸ªå…¬å…±å¯¹è±¡`CyclicBarrier`ï¼Œå¹¶è®¾ç½®åŒæ—¶ç­‰å¾…çš„çº¿ç¨‹æ•°ï¼Œ`CyclicBarrier cyclicBarrier = new CyclicBarrier(3);`
>   - è¿™äº›çº¿ç¨‹åŒæ—¶å¼€å§‹å‡†å¤‡ï¼Œå‡†å¤‡å¥½åï¼Œéœ€è¦ç­‰å¾…åˆ«äººå‡†å¤‡å¥½ï¼Œæ‰€ä»¥è°ƒç”¨`cyclicBarrier.await()`æ–¹æ³•ç­‰å¾…åˆ«äººï¼
>   - å½“æŒ‡å®šçš„éœ€è¦åŒæ—¶ç­‰å¾…çš„çº¿ç¨‹éƒ½è°ƒç”¨äº†è¯¥`cyclicBarrier.await()`æ–¹æ³•æ—¶ï¼Œæ„å‘³ç€è¿™äº›çº¿ç¨‹å‡†å¤‡å¥½äº†ï¼Œé‚£ä¹ˆè¿™äº›çº¿ç¨‹å°±ä¼šå¼€å§‹åŒæ—¶ç»§ç»­æ‰§è¡Œã€
>
> - FutureTaskï¼šå­çº¿ç¨‹å°†ç»“æœè¿”å›ç»™ä¸»çº¿ç¨
>
>   ```
>   Callable<Integer> callable = () -> {
>       System.out.println("å­ä»»åŠ¡å¼€å§‹æ‰§è¡);
>       Thread.sleep(1000);
>       int result = 0;
>       for (int i = 0; i <= 100; i++) {
>       	result += i;
>     	}
>     System.out.println("å­ä»»åŠ¡æ‰§è¡Œå®Œæˆå¹¶è¿”å›ç»“æœ");
>     return result;
>   };
>   // FutureTaskå®ç°äº†Runnableæ¥å£ï¼Œæœ¬è´¨ä¸Šä»æ˜¯ä¸ªrunnable
>   FutureTask<Integer> futureTask = new FutureTask<>(callable);
>   new Thread(futureTask).start();
>   // é˜»å¡ä¸»çº¿ç¨
>   Integer result = futureTask.get();
>   ```

4. å¤šçº¿ç¨‹å¼€å‘è¿‡å—ï¼Ÿé€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼Ÿ

> å¤šçº¿ç¨‹å¼€å‘è¿‡ï¼Œä¸»è¦æ˜¯ç”¨çº¿ç¨‹æ± åˆ›æ–°çº¿ç¨‹ï¼Œå¹¶å°†ä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± å¤„ç†ï¼ŒåŒæ—¶åšçº¿ç¨‹å®‰å…¨ç›¸å…³çš„å¤„ç†ï¼Œæ¯”å¦‚åœ¨Javaä¸­Beané»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼Œåœ¨å¤šçº¿ç¨‹ä¸‹å¯¹å…±äº«å˜é‡è¿›è¡Œä¿®æ”¹ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦å¯¹å…¶åŠ é”ã€æˆ–è€…æ”¹ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆï¼Œä¾‹å¦‚ConcurrentHashMapã€CopyOnWriteArrayListã€BlockingQueueç­‰ã€

5. å¤šçº¿ç¨‹çš„ç†è§£ï¼ˆwhyã€whatã€howï¼Œå¼•å‡ºthreadlocalã€å¹¶å‘é›†åˆã€volitileã€åŒæ­¥æ–¹å¼ï¼ˆé”ï¼‰ï¼

> çº¿ç¨‹æ˜¯CPUè°ƒåº¦å’Œæ‰§è¡Œçš„æœ€å°å•ä½ï¼Œå¤šçº¿ç¨‹çš„å‡ºç°æœ¬è´¨ä¸Šæ˜¯ä¸ºäº†å……åˆ†åˆ©ç”¨CPUèµ„æºï¼Œä¾‹å¦‚å¤šæ ¸CPUï¼Œå¤šçº¿ç¨‹å¯ä»¥å……åˆ†åˆ©ç”¨å¤šæ ¸å¹¶è¡Œå¤„ç†ï¼ŒåŒæ—¶ä¸ºäº†ä¿è¯å¤šåº”ç”¨èƒ½åŒæ—¶è¿è¡Œï¼Œä¸”ä¿è¯CPUä¸è¢«ä¾‹å¦‚IOè¿™ç±»æ“ä½œé˜»å¡å¯¼è‡´èµ„æºæµªè´¹ï¼ŒCPUä¸ºçº¿ç¨‹åˆ†é…äº†æ—¶é—´ç‰‡ï¼Œå½“æ—¶é—´ç‰‡ç»“æŸåä¼šåˆ‡æ¢çº¿ç¨‹ï¼Œæ‰€ä»¥å¤šçº¿ç¨‹é—´åˆå­˜åœ¨å¹¶å‘æƒ…å†µï¼Œè€Œçº¿ç¨‹çš„å¹¶å‘æ“ä½œä¼šå¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚Javaæä¾›äº†å¤šç§å¹¶å‘ç±»è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ¯”å¦‚é”è§£å†³åŸå­æ€§é—®é¢˜ï¼ˆå¸¸è§çš„é”åŒ…æ‹¬Synchorizeã€ReentrantLockï¼ŒCASï¼‰ã€volitileè§£å†³å†…å­˜å¯è§æ€§ã€æŒ‡ä»¤é‡æ’é—®é¢˜ã€threadloca/å¹¶å‘ç±»è§£å†³å…±äº«å˜é‡é—®é¢˜ï¼ˆå¹¶å‘ç±»åŒ…æ‹¬ConcurrentHashMap/HashTableã€Vetor/CopyOnWriteArrayListã€BlockingQueueç­‰ï¼‰

5. å¤šè¿›ç¨ç»§æ‰¿ä»€ä¹ ä¸ç»§æ‰¿ä»€ä¹ï¼Œè¿›ç¨‹é—´çš„é€šä¿¡

> **è¿›ç¨‹åˆ›å»º**ï¼šLInuxä¸­é€šè¿‡forkå‘½ä»¤è¿›è¡Œè¿›ç¨‹çš„åˆ›å»ºï¼Œæ–°è¿›ç¨‹éƒ½æ˜¯ç”±ä¸€ä¸ªå·²ç»å­˜åœ¨çš„è¿›ç¨‹æ‰§è¡Œäº†ä¸€ä¸ªç”¨äºåˆ›å»ºè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨è€Œåˆ›å»ºçš„ã€‚ç”³è¯·åˆ›å»ºæ–°è¿›ç¨‹çš„è¿›ç¨‹æ˜¯çˆ¶è¿›ç¨‹ï¼Œè¢«åˆ›å»ºçš„è¿›ç¨‹æ˜¯å­è¿›ç¨‹ã€‚åœ¨Unixä¸­ï¼Œçˆ¶å­è¿›ç¨‹é—´å½¢æˆç±»ä¼¼æ ‘å½¢çš„å±‚æ¬¡ç»“æ„ï¼Œè¿›ç¨‹å’Œå…¶æ‰€æœ‰å­è¿›ç¨‹å½¢æˆ***è¿›ç¨‹ç»**ã€‚å­è¿›ç¨‹åˆ›å»ºåï¼Œçˆ¶å­è¿›ç¨‹æ‹¥æœ‰ä¸åŒçš„åœ°å€ç©ºé—´ï¼Œå³å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹å¯¹å…¶åœ°å€ç©ºé—´è¿›è¡Œäº†ä¿®æ”¹ï¼Œè¿™ä¸ªä¿®æ”¹å¯¹å…¶ä»–è¿›ç¨‹æ˜¯ä¸å¯è§çš„ã€‚ä¸åŒè¿›ç¨‹é—´çš„åœ°å€ç©ºé—´ä¸­çš„æ–‡ä»¶çš„å…±äº«é€šå¸¸åˆ†ä¸ºä¸¤ç±»ï¼
>
> 1. ä¸å¯å†™çš„å†…å­˜åŒºå…±äº
> 2. å¯å†™å†…å­˜é€šè¿‡å†™æ—¶å¤åˆ¶å…±äº«ï¼šå½“å­çº¿ç¨‹è¦å¯¹è¯¥å†…å­˜è¿›è¡Œä¿®æ”¹æ—¶ï¼Œéœ€è¦å¤åˆ¶ä¸€ä»½åˆ°è‡ªå·±çš„åœ°å€ç©ºé—´ä¸­ï¼Œä»¥ç¡®ä¿ä¿®æ”¹æ˜¯åœ¨è‡ªå·±çš„ç§æœ‰ç©ºé—´ä¸­è¿›è¡Œã€
>
> **è¿›ç¨‹çŠ¶æ€*ï¼šç®€å•çŠ¶æ€
>
> ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagese4692f03e7af44d7bb6276acd7a0ab2d%7Etplv-k3u1fbpfcp-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)
>
> **è¿›ç¨‹çš„è°ƒåº*ï¼
>
> - https://juejin.cn/post/6844903489148026888#heading-3
>
> æ“ä½œç³»ç»Ÿé€šè¿‡PCBï¼ˆè¿›ç¨‹æ§åˆ¶å—ï¼‰å¯¹è¿›ç¨‹è¿›è¡Œè°ƒåº¦ï¼ŒPCBåŒ…å«äº†è¿›è¡Œè¿è¡Œæ—¶ä»£çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ä¸‰éƒ¨åˆ†ï¼š
>
> - è¿›ç¨‹æ ‡è¯†ä¿¡æ¯ï¼šç”¨æˆ·IDã€è¿›ç¨‹IDï¼ˆPIDï¼‰ã€çˆ¶è¿›ç¨‹ID
> - è¿›ç¨‹çŠ¶æ€ä¿¡æ¯ï¼šè¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€
> - è¿›ç¨‹æ§åˆ¶ä¿¡æ¯ï¼šä¼˜å…ˆçº§ï¼ˆè·å¾—CPUçš„ä¼˜å…ˆçº§ï¼‰ã€è¿›ç¨‹é€šä¿¡ä¿¡æ¯ã€èµ„æºåˆ†é…ä¿¡æ
>
> ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagese07287f8a82d700ac8a13b72ed2c5cfe%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)
>
> **è¿›ç¨‹é€šä¿¡**ï¼šï¼ˆå†…å­˜ã€ä¸­é—´ä»¶ã€æ–‡ä»¶ï¼‰ï¼šhttps://baike.baidu.com/item/%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1
>
> - **å…±äº«å­˜å‚¨**ï¼šé€šè¿‡å¯¹åŒå—å†…å­˜è¿›è¡Œè¯»å†™æ“ä½
> - **æ¶ˆæ¯é€šä¿¡**ï¼šé€šè¿‡***sendã€recieve***è¿›è¡Œå‘é€å’Œæ¥æ”¶æ“ä½œ
>   - ç›´æ¥é€šä¿¡ï¼šç‚¹å¯¹ç‚¹é€šä¿¡
>   - é—´æ¥é€šä¿¡ï¼šé€šè¿‡ä¸­é—´åª’ä»‹ï¼ˆMQï¼‰è¿›è¡Œé€šä¿¡
> - **ç®¡é“é€šä¿¡**ï¼šåŸºäºæ–‡ä»¶ç³»ç»Ÿï¼Œä»¥FIFOæ–¹å¼è¿›è¡Œé€šä¿¡ï¼Œç®¡é“æ˜¯åŠåŒå·¥çš„ï¼Œé€šè¿‡ç³»ç»Ÿè°ƒç”¨***read(), write()***å‡½æ•°è¿›è¡Œè¯»å†™æ“ä½œã€

7. çº¿ç¨‹æ±

> > ***å¸¸è§çš„çº¿ç¨‹æ± æœ‰å“ªå‡ ç§ï¼Ÿå¦‚æœçº¿ç¨‹æ± çˆ†äº†ä¼šæ€æ ·**ï¼- ï¼
>
> - https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Java%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2078%20%E8%AE%B2-%E5%AE%8C/12%20%E6%9C%89%E5%93%AA%206%20%E7%A7%8D%E5%B8%B8%E8%A7%81%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%B1%A0%EF%BC%9F%E4%BB%80%E4%B9%88%E6%98%AF%20Java8%20%E7%9A%84%20ForkJoinPool%EF%BC%9F.md
>
> ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesCgoB5l3kzomAckv5AAAxf6FCPco696.png)
>
> - **FixedThreadPool**ï¼šå®šé•¿çº¿ç¨‹æ± ï¼Œåˆå§‹æ•°é‡ä¸º0ï¼Œè¾¾åˆ°æœ€å¤§æ•°åçº¿ç¨‹æ± æ•°é‡ä¸€å®šå¹¶ä¸”ä¸ä¼šè¢«å›æ”¶ï¼Œè¶…è¿‡æ•°é‡çš„çº¿ç¨‹åˆ™è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€
>
> - **CachedThreadPool**ï¼šå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œæ— çº¿ç¨‹æ•°é‡é™åˆ¶ï¼ˆæœ€å¤§å¯åˆ°Integer.MAXï¼‰ï¼Œæ¯è¿›æ¥ä¸€ä¸ªä»»åŠ¡ï¼Œå¦‚æœæ— ç©ºé—´çº¿ç¨‹åˆ™åˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œç­‰å¾…é˜Ÿåˆ—ä¸ºSynchronousQueueï¼ˆå®¹é‡ä¸º0ï¼‰ï¼Œ60ç§’å†…çº¿ç¨‹æ— å·¥ä½œåˆ™è¢«å›æ”
>
> - **ScheduledThreadPool**ï¼šå®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± ï¼Œå¯æŒ‡å®šæ ¸å¿ƒçº¿ç¨‹æ•°é‡ï¼Œæœ€å¤§çº¿ç¨‹æ•°é‡ä¸ºInteger.MAXï¼Œè¶…è¿‡æ ¸å¿ƒæ•°é‡çš„çº¿ç¨‹åœ¨æ‰§è¡Œå®Œåå³è¢«å›æ”
>
>   ```java
>   ScheduledExecutorService service = Executors.newScheduledThreadPool(10);
>   
>   // æ¯åç§’å®šæ—¶æ‰§è¡Œä¸€æ¬
>   service.schedule(new Task(), 10, TimeUnit.SECONDS);
>   
>   // åç§’åï¼Œæ¯åç§’æ‰§è¡Œä¸€æ¬
>   service.scheduleAtFixedRate(new Task(), 10, 10, TimeUnit.SECONDS);
>   
>   // åç§’åæ‰§è¡Œä»»åŠ¡ï¼Œå¹¶ä¸”åœ¨æ¯æ¬¡ä»»åŠ¡æ‰§è¡Œç»“æŸåçš0ç§’åå†æ¬¡æ‰§è¡Œ
>   service.scheduleWithFixedDelay(new Task(), 10, 10, TimeUnit.SECONDS);
>   ```
>
> - **SingleThreadExecutor**ï¼šå•çº¿ç¨‹çº¿ç¨‹æ± ã€‚é€‚ç”¨äºæ‰€æœ‰è¢«æäº¤çš„ä»»åŠ¡éƒ½éœ€è¦è¢«ä¾æ¬¡æ‰§è¡Œçš„åœºæ™¯ã€
>
> - **SingleThreadScheduledExecutor**ï¼šå•çº¿ç¨‹å®šæ—¶çº¿ç¨‹æ± ã€‚æœ¬è´¨å’Œå®šæ—¶çº¿ç¨‹æ± ä¸€æ ·ï¼Œåªä¸è¿‡åº•å±‚å°†çº¿ç¨‹æ•°è®¾ç½®ä¸º1
>
> - **ForkJoinPool**ï¼šJDK7åå¼•å…¥çš„çº¿ç¨‹æ± ï¼Œé€‚åˆå¯ä»¥äº§ç”Ÿå­ä»»åŠ¡çš„ä»»åŠ¡ï¼Œä¾‹å¦‚é€’å½’ã€æ ‘çš„éå†ç­‰
>
>   - ç‰¹ç‚¹ï¼šé™¤äº†æœ‰ä»»åŠ¡é˜Ÿåˆ—ï¼Œçº¿ç¨‹æ± ä¸­çš„æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„åŒç«¯é˜Ÿåˆ—ï¼Œä»»åŠ¡forkï¼ˆäº§ç”Ÿå­ä»»åŠ¡åï¼‰ä¼šè¢«åˆ†é…åˆ°å„ä¸ªå­çº¿ç¨‹çš„åŒç«¯é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœæŸä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ç¹é‡ï¼Œå¹¶ä¸”æœ‰å…¶ä»–çº¿ç¨‹ç©ºé—²ï¼Œåˆ™ä¼šç”¨â€œwork-stealingâ€ç®—æ³•ï¼Œä»é˜Ÿåˆ—å¦å¤–ä¸€ç«¯è·å–ä»»åŠ¡è¿›è¡Œæ‰§è¡Œã€
>
>   ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesCgotOV3kzomAflZxAAB99x9-MzI241.png)
>
>   ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesCgoB5l3nFSOAFOkbAABvJKvhTKk938.png)
>
> 
>
> >**å®ç°çº¿ç¨‹æ± ï¼Œä½ è§‰å¾—æ ¸å¿ƒæ˜¯ä»€ä¹*
>
> - çº¿ç¨‹æ•°é‡çš„ç®¡ç†ï¼ˆæ ¸å¿ƒ/æœ€å¤§çº¿ç¨‹æ•°é‡ï¼‰
> - çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—ï¼ˆå½“ä»»åŠ¡>æ ¸å¿ƒçº¿ç¨‹æ•°é‡æ—¶å¦‚ä½•å¤„ç†ï¼‰
> - æ‹’ç»ç­–ç•¥ï¼ˆé˜Ÿåˆ—å·²æ»¡å¹¶ä¸”çº¿ç¨‹è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°é‡æ—¶å¦‚ä½•å¤„ç†ï¼
>
> 
>
> > **çº¿ç¨‹æ± åŠå‚æ•°ï¼ŒmaximumSize æ€ä¹ˆè¾¾åˆ°**ï¼›ï¼ˆçº¿ç¨‹æ± æ‹’ç»ç­–ç•¥ã€æ ¸å¿ƒçº¿ç¨‹ç­‰åŸç†ï¼
>
> ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesimagesCgoB5l3eH8mAAoJCAACEOKMHtpw036.png)
>
> 
>
> > **çº¿ç¨‹æ± ç­‰æ‹’ç»ç­–ç•¥**
>
> - AbortPolicyï¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œå¼€å‘è€…å¯ä»¥æ„ŸçŸ¥ä»»åŠ¡å¤±è´¥å¹¶æ•è·å¼‚å¸¸ï¼Œåšç›¸å…³çš„å¤„ç
> - DiscardPolicyï¼šç›´æ¥ä¸¢æ‰ï¼Œæ¶ˆæ¯ä¼šæ— æ„ŸçŸ¥ä¸¢å¤±ï¼Œå­˜åœ¨æ•°æ®ä¸¢å¤±é£é™
> - DiscardOldestPolicyï¼šä¸¢å¼ƒé˜Ÿåˆ—å¤´éƒ¨çš„ä»»åŠ¡ï¼ˆé€šå¸¸æ˜¯åœ¨é˜Ÿåˆ—ä¸­å¾…çš„æ—¶é—´æœ€ä¹…çš„ï¼‰ï¼ŒåŒæ ·å­˜åœ¨æ•°æ®ä¸¢å¤±é£é™©
> - CallerRunsPolicyï¼šç”±æäº¤çš„çº¿ç¨‹æ‰§è¡Œå…¶æäº¤çš„ä»»åŠ¡ï¼ˆæ¯”è¾ƒå®Œå–„ï¼‰ã€‚æœ‰ä»¥ä¸‹å¥½å¤„ï¼
>   - ç”±æäº¤ä»»åŠ¡çš„çº¿ç¨‹æ‰§è¡Œï¼Œæ•°æ®ä¸ä¼šä¸¢å¤
>   - æäº¤ä»»åŠ¡çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå³è¢«å ç”¨ï¼Œä¸èƒ½å†æäº¤ï¼Œå‡ç¼“ä»»åŠ¡æäº¤çš„é€Ÿåº¦ï¼Œä¸ºçº¿ç¨‹æ± æä¾›ç¼“å†²æœŸå¤„ç†
>
> ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesimagesCgotOV3g0WWAVWVlAAEsBI6lEEA162.png)
>
> 
>
> > **çº¿ç¨‹æ± çš„ç­‰å¾…é˜Ÿåˆ—**
>
> ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesCgq2xl3nUryAJBkpAAA0_WFSrB8184.png)
>
> 
>
> > **çº¿ç¨‹æ± çš„å¤„ç†è¿‡ç¨‹**
>
> - æ ¸å¿ƒçº¿ç¨‹æ»¡åˆ™æ”¾å…¥é˜Ÿåˆ— -> é˜Ÿåˆ—æ»¡åˆ™å¯åŠ¨å¤‡ç”¨ç­–ç•¥ï¼Œåˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹ -> è¾¾åˆ°æœ€å¤§æ•°é‡åˆ™é‡‡ç”¨æ‹’ç»ç­–ç•¥
>
> ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesimagesCgoB5l3eH-KAAHpkAAC4vEMOXQ4797.png)
>
> 
>
> > **çº¿ç¨‹æ± ç›¸å…³å·¥å…·ç±»ä»‹ç»**
>
> JUCä¸­çš„Executors.newçº¿ç¨‹æ±)ï¼Œç›¸å…³çš„ç±»åŒ…æ‹
>
> - ThreadFactoryï¼ˆé»˜è®¤åˆ›å»ºéå®ˆæŠ¤çº¿ç¨‹ï¼
> - ç­‰å¾…é˜Ÿåˆ—
> - æ‹’ç»ç­–ç•¥ï¼ˆRejectedExecutionHandlerï¼



#### çº¿ç¨‹åŒæ­¥ï¼ˆSynchorizedã€Lockï¼

1. **Javaæœ‰å“ªäº›é”ï¼Œåˆ†åˆ«é€‚ç”¨äºå“ªäº›åœºæ™*

> ä»å¾…çº¿ç¨‹åŒæ­¥æ—¶å®ç°æ€æƒ³çš„ä¸åŒï¼Œå¯ä»¥åˆ†ä¸ºï¼
>
> - ä¹è§‚é”ï¼šä¹è§‚é”è®¤ä¸ºä½¿ç”¨æ•°æ®æ—¶ä¸ä¼šæœ‰åˆ«çš„çº¿ç¨‹ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šåŠ é”ï¼Œåªè®°å½•æ›´æ–°å‰åçš„æ•°æ®ç­‰å€¼åˆ¤æ–­æ˜¯å¦è¢«ä¿®æ”¹ï¼Œå¦‚æœè¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†ï¼Œåˆ™æ ¹æ®ä¸åŒçš„å®ç°æ‰§è¡Œä¸åŒçš„æ“ä½œï¼Œä¾‹å¦‚æŠ›å‡ºå¼‚å¸¸æˆ–è€…è‡ªåŠ¨é‡è¯•ï¼ˆé€šå¸¸æ˜¯åè€…ï¼‰ã€‚Javaä¸­JUCçš„Atomicç±»éƒ½æ˜¯åŸºäºCASå®ç°ä¹è§‚é”ã€
> - æ‚²è§‚é”ï¼šæ‚²è§‚é”è®¤ä¸ºåœ¨ä¿®æ”¹æ•°æ®æ—¶ä¸€å®šä¼šæœ‰å…¶ä»–çº¿ç¨‹æ¥ä¿®æ”¹ï¼Œæ‰€ä»¥åœ¨ä¿®æ”¹å‰ä¼šå…ˆåŠ é”ï¼Œç¡®ä¿ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹ã€‚Javaä¸­çš„Synchronizedå’ŒLockéƒ½æ˜¯åŸºäºæ‚²è§‚é”æ€æƒ³å®ç°ã€
>
> ä»Synchronizedå»çœ‹å¾…é”çš„è½»é‡ç¨‹åº¦ï¼Œå¯ä»¥åˆ†ä¸ºï¼
>
> - åå‘é”
> - è½»é‡çº§é”
> - é‡é‡çº§é”
>
> ä»çº¿ç¨‹ç”³è¯·é”æ—¶è·å–é”çš„é¡ºåºï¼Œå¯ä»¥åˆ†ä¸ºï¼
>
> - å…¬å¹³é”ï¼šæ–°çº¿ç¨‹æ¥çš„æ—¶å€™å¦‚æœç­‰å¾…é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚ä¾‹å¦‚ReentrantLockçš„å…¬å¹³æ¨¡å¼ã€
> - éå…¬å¹³é”ï¼šæ–°çº¿ç¨‹æ¥çš„æ—¶å€™ï¼Œæ— è®ºç­‰å¾…é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œéƒ½ä¼šå…ˆåšé”æŠ¢å ï¼ŒæˆåŠŸåˆ™æ‰§è¡Œï¼Œå¤±è´¥åˆ™å…¥é˜Ÿã€‚ä¾‹å¦‚Synchorizeï¼Œåˆ™ä¸ºéå…¬å¹³æ¨¡å¼ã€
>
> ä»åŒä¸ªçº¿ç¨‹æ˜¯å¦å¯ä»¥é‡å¤è·å–é”ï¼Œå¯ä»¥åˆ†ä¸ºï¼š
>
> - å¯é‡å…¥é”ï¼šå½“çº¿ç¨‹é€’å½’è°ƒç”¨çš„æ—¶å€™ï¼Œè·å–åŒä¸ªé”æ—¶ä¼šå°†é”è®¡æ•1è€Œä¸æ˜¯é˜»å¡ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥é¿å…æ­»é”ã€‚ReentrantLockå’Œsynchronizedéƒ½æ˜¯å¯é‡å…¥é”ã€
> - ä¸å¯é‡å…¥é”ï¼šåŒä¸ªçº¿ç¨‹è·å–å¤šæ¬¡è·å–åŒä¸ªé”ï¼Œç¬¬äºŒæ¬¡ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ã€
>
> ä»é”æ˜¯å¦å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶æŒæœ‰äººï¼Œå¯ä»¥åˆ†ä¸ºï¼š
>
> - å…±äº«é”ï¼ˆè¯»é”ï¼‰ï¼šå½“æŸä¸ªçº¿ç¨‹å¯¹æ•°æ®åŠ äº†è¯»é”åï¼Œå…¶ä»–çº¿ç¨‹ä»ç„¶å¯ä»¥åŠ è¯»é”ï¼Œä½†æ˜¯ä¸èƒ½åŠ å†™é”ã€‚ä¾‹å¦‚ReentrantReadWriteLockï¼Œæœ¬è´¨ä¸Šæ˜¯å®ç°äº†ä¸¤ä¸ªé”ReadLockå’ŒWriteLockï¼ˆåº•å±‚éƒ½æ˜¯AQSçš„Syncå®ç°ï¼‰ï¼Œè¯»é”å¯ä»¥ä¿è¯å¹¶å‘è¯»æ€§èƒ½é«˜æ•ˆï¼Œè€Œè¯»å†™ã€å†™è¯»ã€å†™å†™çš„è¿‡ç¨‹äº’æ–¥ã€‚å…¬å¹³æ¨¡å¼ä¸‹ï¼Œé˜»å¡é˜Ÿåˆ—çš„çº¿ç¨‹ä¾æ¬¡å»åšé”çš„è·å–ï¼›éå…¬å¹³æ¨¡å¼ä¸‹ï¼Œå†™é”å¯ä»¥ä¸€ç›´å‚ä¸åˆ°é”çš„æŠ¢å ï¼Œé¿å…å‡ºç°å†™é”é¥¥é¥¿çš„æƒ…å†µã€
> - ç‹¬äº«é”ï¼ˆæ’ä»–é”å†™é”ï¼‰ï¼šå½“æŸä¸ªçº¿ç¨‹å¯¹æ•°æ®åŠ äº†å†™é”åï¼Œè¯¥çº¿ç¨‹ç‹¬å æ•°æ®ï¼Œä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹å’Œè¯»å–ã€‚ä¾‹å¦‚ReentrantLockã€

2. **synchronized**
   - https://pi-ka-chu.github.io/2019/12/synchronize%E5%85%B3%E9%94%AE%E5%AD%97/
   - *https://juejin.cn/post/6844903918653145102#heading-15

> > **é”ï¼ˆsynchronized å’Lockï¼‰ï¼Œsynchronized åŠ åˆ°æ™®é€šæ–¹æ³•å’Œé™æ€æ–¹æ³•çš„åŒºåˆ«ï¼Œä¸€ä¸ªç±»çš„ä¸¤ä¸ªæ–¹æ³•éƒ½åŠ äº† synchronizedï¼Œæ˜¯ä¸€ä¸ªé”è¿˜æ˜¯ä¸¤ä¸ªé”*ï¼- ï¼
>
> ç­”ï¼šsynchronizedå¯ä»¥ä¿®é¥°æ–¹æ³•ã€ä»£ç å—ï¼ŒåŠ çš„é”åˆ†ä¸ºç±»é”å’Œå¯¹è±¡é”ï¼Œä¾‹å¦‚synchronizedä¿®é¥°staticå’Œæ™®é€šæ–¹æ³•ï¼Œä¿®é¥°staticçš„åŠ çš„æ˜¯**ç±»é”**ï¼Œä¸åŒå¯¹è±¡å¯¹è¯¥æ–¹æ³•çš„è°ƒç”¨ï¼Œéƒ½ä¼šå‡ºç°é”ç«äº‰çš„æƒ…å†µï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªå¯¹è±¡å¯ä»¥è·å–åˆ°é”ã€‚å¯¹äºæ™®é€šæ–¹æ³•ï¼ŒåŠ çš„æ˜*å¯¹è±¡é”*ï¼Œå³å½“å‰å¯¹è±¡ï¼Œå³åŒæ—¶è°ƒç”¨æ—¶åªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ï¼Œå› ä¸ºæ˜¯å¯¹è±¡é”ï¼Œä¸åŒå¯¹è±¡ä¹‹é—´çš„è°ƒç”¨åˆ™ä¸ä¼šç›¸äº’é˜»å¡ã€
>
> 
>
> > **synchronizedçš„æ–¹æ³•åŒæ­¥å’Œä»£ç å—åŒæ­¥åŒºåˆ*
>
> - *synchronizedåŠ é”åŸç†ï¼šhttps://juejin.cn/post/6844903918653145102
>
> ç­”ï¼šä¸¤è€…åœ¨JVMçš„åº•å±‚å®ç°æ˜¯ä¸åŒçš
>
> - åŒæ­¥ä»£ç å—çš„å®ç°ä¸»è¦åŸºäºå¯¹è±¡ç›‘è§†å™¨ï¼ˆMonitorï¼‰å®ç°ï¼Œå…¶ä¸»è¦æ˜¯åˆ©ç”¨`monitorenter`å’Œ`monitorexit`æŒ‡ä»¤å®ç°ä»£ç åŒæ­¥ã€
> - åŒæ­¥æ–¹æ³•åˆ™æ˜¯ä¾é æ–¹æ³•ä¿®é¥°ç¬¦ä¸Šçš„`ACC_SYNCHRONIZED`æ ‡è¯†å®ç°åŒæ­¥ã€‚è¢«synchronizedä¿®é¥°çš„æ–¹æ³•ä¸Šä¼šæœ‰ACC_SYNCHRONIZEDæ ‡è¯†ï¼Œæœ‰è¯¥æ ‡è¯†çš„æ–¹æ³•éœ€è¦å…ˆè·å–monitorå¯¹è±¡é”ï¼Œé»˜è®¤æ˜¯å½“å‰å¯¹è±¡ï¼Œè€ŒåŒæ­¥ä»£ç å—å¯ä»¥æŒ‡å®šåŠ é”çš„å¯¹è±¡ï¼Œé€šå¸¸æˆ‘ä»¬æ˜¯å®šä¹‰ä¸€ä¸ªfinalå¯¹è±¡ï¼Œé˜²æ­¢å¯¹è±¡è¢«ä¿®æ”¹å¯¼è‡´æ— æ³•è¾¾åˆ°é”çš„æ•ˆæœã€
>
> 
>
> > **synchronizedçš„åŸç*
>
> ç¬¬ä¸€å±‚ï¼ˆsynchronizedï¼‰ï¼šsynchronizedå¯ä»¥ä¿®é¥°æ–¹æ³•å’Œä»£ç å—ï¼ŒåŒæ­¥ä»£ç å—åº•å±‚é‡‡ç”¨Monitorå¯¹è±¡çš„minitorenterå’ŒmonitorexitæŒ‡ä»¤è¿›è¡ŒåŠ é”å’Œè§£é”ã€‚åŒæ­¥æ–¹æ³•åº•å±‚æ˜¯å¯¹æ–¹æ³•åŠ äº†ACC_SYNCHRONIZEDæ ‡è¯†ï¼Œè€Œæœ‰è¯¥æ ‡è¯†çš„æ–¹æ³•éœ€è¦å…ˆè·å–Monitorå¯¹è±¡é”ï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šsynchronizedé€šè¿‡Monitorå¯¹è±¡è¿›è¡ŒåŠ é”è§£é”æ“ä½œã€
>
> ç¬¬äºŒå±‚ï¼ˆMonitorï¼‰ï¼šMonitoråˆç§°ä¸ºç›‘è§†å™¨ï¼Œå…¶å®ç°äº†åœ¨ä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œæœ€å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œç›‘è§†å™¨çš„æŸä¸ªå­ç¨‹åºï¼Œå·¥ä½œåŸç†å¦‚ä¸‹ï¼
>
> - æƒ³è¦è·å–monitorçš„çº¿ç¨é¦–å…ˆä¼šè¿›å…¥_EntryListé˜Ÿåˆ—ã€
> - å½“æŸä¸ªçº¿ç¨‹è·å–åˆ°å¯¹è±¡çš„monitoråè¿›å…¥_OwneråŒºåŸŸï¼Œè®¾ç½®ä¸ºå½“å‰çº¿ç¨‹,åŒæ—¶è®¡æ•°å™¨_countåŠã€
> - å¦‚æœçº¿ç¨‹è°ƒç”¨äº†wait()æ–¹æ³•ï¼Œåˆ™ä¼šè¿›å…¥_WaitSeté˜Ÿåˆ—ã€‚å®ƒä¼šé‡Šæ”¾monitoré”ï¼Œå³å°†_ownerèµ‹å€¼ä¸ºnull,_countè‡ªå‡1,è¿›å…¥_WaitSeté˜Ÿåˆ—é˜»å¡ç­‰å¾…ã€
> - å¦‚æœå…¶ä»–çº¿ç¨‹è°ƒç”¨ notify() / notifyAll() ï¼Œä¼šå”¤é†’_WaitSetä¸­çš„æŸä¸ªçº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹å†æ¬¡å°è¯•è·å–monitoré”ï¼ŒæˆåŠŸå³è¿›å…¥_OwneråŒºåŸŸã€
> - åŒæ­¥æ–¹æ³•æ‰§è¡Œå®Œæ¯•äº†ï¼Œçº¿ç¨‹é€€å‡ºä¸´ç•ŒåŒºï¼Œä¼šå°†monitorçš„ownerè®¾ä¸ºnullï¼Œå¹¶é‡Šæ”¾ç›‘è§†é”ã€
>
> ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images16ca34f7e0149c3d%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)
>
> ç¬¬ä¸‰å±‚ï¼ˆMinitorå’Œå¯¹è±¡çš„å…³è”ï¼‰ï¼š
>
> ç”±å›¾å¯çŸ¥é“ï¼ŒMonitorå¯¹è±¡é€šè¿‡å¯¹è±¡çš„Mark Workä¸­çš„äº’æ–¥é‡æŒ‡é’ˆè¿›è¡Œå…³è”ï¼ˆé‡é‡çº§é”çš„æƒ…å†µä¸‹ï¼‰ï¼Œæ‰€ä»¥åœ¨é‡é‡çº§é”çš„æƒ…å†µä¸‹ï¼Œçº¿ç¨‹åœ¨è·å–é”çš„æ—¶å€™ä¼šå»Monitorå¯¹è±¡ä¸­åšé”çš„è·å–ã€
>
> ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images16ca45741a93cf93%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)
>
> ä¸åŒé”çš„åŠ é”è¿‡ç¨‹ï¼ˆé”çš„è†¨èƒ€ï¼‰ï¼š
>
> - åå‘é”ï¼š
>   1. è®¿é—®`Mark Work`ä¸­åå‘é”çš„æ ‡è¯†æ˜¯å¦ä¸º1ï¼ˆé»˜è®¤ä¸º1ï¼Œå³å¼€å¯çŠ¶æ€ï¼‰
>   2. å¦‚æœä¸ºå¯åå‘çŠ¶æ€ï¼Œåˆ™æ£€æŸ¥`_owner`çº¿ç¨‹Idæ˜¯å¦æŒ‡å‘å½“å‰çº¿ç¨‹ï¼Œå¦‚æœæ˜¯ï¼Œè¿›å…¥æ­¥éªï¼Œå¦åˆ™è¿›å…¥æ­¥éª
>   3. å¦‚æœçº¿ç¨‹IDæœªæŒ‡å‘å½“å‰çº¿ç¨‹ï¼Œåˆ™é€šè¿‡`CAS`æ“ä½œç«äº‰é”ã€‚å¦‚æœåŠ é”æˆåŠŸï¼ˆæˆåŠŸåŠ é”åè·å–é”çš„çº¿ç¨‹å†æ¬¡è¿›å…¥æ—¶åªéœ€æ ¡éªŒæ˜¯å¦å½“å‰è·å–é”çš„çº¿ç¨‹Idï¼Œæ— éœ€å†è¿›è¡ŒCASæ“ä½œï¼‰ï¼Œåˆ™æ‰§è¡Œæ­¥éªï¼›å¦‚æœåŠ é”å¤±è´¥ï¼Œåˆ™æ‰§è¡Œæ­¥éªã€
>   4. å¦‚æœ`CAS`è·å–åå‘é”å¤±è´¥ï¼Œåˆ™è¡¨ç¤ºå½“å‰å­˜åœ¨ç«äº‰ï¼Œåœ¨åˆ°è¾¾å…¨å±€å®‰å…¨ç‚¹æ—¶ï¼Œè·å–åˆ°åå‘é”çš„çº¿ç¨‹è¢«æŒ‚èµ·ï¼Œ**åå‘é”å‡çº§ä¸ºè½»é‡çº§é”**ï¼Œç„¶åè¢«é˜»å¡åœ¨å®‰å…¨ç‚¹çš„çº¿ç¨‹ç»§ç»­æ‰§è¡ŒåŒæ­¥ä»£ç ã€
>   5. æ‰§è¡ŒåŒæ­¥ä»£ç ã€
>   6. **é‡Šæ”¾é”*ï¼šåå‘é”ä¸ä¼šç”±çº¿ç¨‹ä¸»åŠ¨é‡Šæ”¾ï¼Œè€Œæ˜¯ç­‰åˆ°å…¶ä»–ç«äº‰é”çš„çº¿ç¨‹å‡ºç°æ—¶ï¼Œæš‚åœæ‹¥æœ‰åå‘é”çš„çº¿ç¨‹ï¼Œæ£€æŸ¥çº¿ç¨‹æ˜¯å¦å­˜æ´»ï¼Œå¦‚æœä¸å­˜æ´»ï¼Œåˆ™æ¢å¤åˆ°æ— é”çŠ¶æ€ï¼Œå…è®¸å…¶ä»–çº¿ç¨‹ç«äº‰ï¼›å¦‚æœå­˜æ´»ï¼Œåˆ™æŒ‚èµ·æŒæœ‰åå‘é”çš„çº¿ç¨‹ï¼Œå°†å¯¹è±¡å¤´`Mark word`ä¿®æ”¹ä¸ºæŒ‡å‘é”è®°å½•æŒ‡é’ˆçš„æ ‡è¯†ï¼Œ**é”å‡çº§ä¸ºè½»é‡çº§é”çŠ¶æ€ï¼ˆ00ï¼*ï¼Œæœ€åé‡æ–°å”¤é†’æŒ‚èµ·çš„çº¿ç¨‹ã€
> - è½»é‡çº§é”ï¼šï¼ˆè½»é‡çº§è·å–é”çš„ä¾æ®æ˜¯ç¬¬å››æ­¥çš„æ ˆå¸§å’ŒMark Wordç›¸äº’æŒ‡å‘æˆåŠŸï¼Œè¿™ä¸ªæ›¿æ¢è¿‡ç¨‹ç”±CASè¿›è¡Œæ“ä½œï¼Œå¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­Mark Workä¸­çš„æŒ‡é’ˆå‘ç°å˜åŒ–ï¼Œåˆ™è¯´æ˜æœ‰å…¶ä»–çº¿ç¨‹è·å–åˆ°äº†é”ï¼Œæ­¤æ—¶çº¿ç¨‹ç»§ç»­è‡ªæ—‹ç›´åˆ°è½»é‡çº§é”è¢«é‡Šæ”¾ï¼Œå³Mark Workä¸­çš„Lock Recordè¢«èµ‹å€¼å›æ¥ï¼Œå¦‚æœä¸€ç›´å¤±è´¥ï¼Œåˆ™åœ¨ä¸€å®šæ¬¡æ•°åè†¨èƒ€åˆ°é‡é‡çº§é”ï¼‰
>   1. åœ¨ä»£ç è¿›å…¥åŒæ­¥å—çš„æ—¶å€™ï¼Œå¦‚æœåŒæ­¥å¯¹è±¡é”çŠ¶æ€ä¸ºæ— é”çŠ¶æ€ï¼ˆé”æ ‡å¿—ä½ä¸ºâ€1â€çŠ¶æ€ï¼Œæ˜¯å¦ä¸ºåå‘é”æ ‡è¯†ä¸ºâ€â€ï¼‰ï¼Œè™šæ‹Ÿæœºé¦–å…ˆå°†åœ¨**å½“å‰çº¿ç¨‹çš„æ ˆå¸*ä¸­å»ºç«‹ä¸€ä¸ªåä¸*é”è®°å½*ï¼ˆ`Lock Record`ï¼‰çš„ç©ºé—´ï¼Œç”¨äºå­˜å‚¨é”å¯¹è±¡ç›®å‰çš„`Mark Word`çš„æ‹·è´ï¼Œå®˜æ–¹ç§°ä¹‹ä¸º`Displaced Mark Word`ã€
>      ![image.png](http://ww1.sinaimg.cn/mw690/0061iV1igy1ga0yp11ok4j30t00dqtd3.jpg)
>   2. æ‹·è´å¯¹è±¡å¤´ä¸­çš„`Mark Word`å¤åˆ¶åˆ°é”è®°å½•ä¸­ã€
>   3. æ‹·è´æˆåŠŸåï¼Œè™šæ‹Ÿæœºå°†ä½¿ç”¨`CAS`æ“ä½œå°è¯•å°†å¯¹è±¡çš„`Mark Word`æ›´æ–°ä¸ºæŒ‡å‘`Lock Record`çš„æŒ‡é’ˆï¼Œå¹¶å°†`Lock record`é‡Œçš„`owner`æŒ‡é’ˆæŒ‡å‘`object mark word`ã€‚å¦‚æœæ›´æ–°æˆåŠŸï¼Œåˆ™æ‰§è¡Œæ­¥éªï¼Œå¦åˆ™æ‰§è¡Œæ­¥éªã€
>   4. å¦‚æœè¿™ä¸ªæ›´æ–°åŠ¨ä½œæˆåŠŸäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±æ‹¥æœ‰äº†è¯¥å¯¹è±¡çš„é”ï¼Œå¹¶ä¸”å¯¹è±¡`Mark Word`çš„é”æ ‡å¿—ä½è®¾ç½®ä¸ºâ€0â€ï¼Œå³è¡¨ç¤ºæ­¤å¯¹è±¡å¤„äº**è½»é‡çº§é”å®šçŠ¶æ€*ï¼Œè¿™æ—¶å€™çº¿ç¨‹å †æ ˆä¸å¯¹è±¡å¤´çš„çŠ¶æ€å¦‚ä¸‹å›¾æ‰€ç¤ºã€
>      ![image.png](http://ww1.sinaimg.cn/mw690/0061iV1igy1ga0yurrfbqj30sa0iyag8.jpg)
>   5. å¦‚æœè¿™ä¸ªæ›´æ–°æ“ä½œå¤±è´¥äº†ï¼Œè™šæ‹Ÿæœºé¦–å…ˆä¼šæ£€æŸ¥å¯¹è±¡çš„`Mark Word`æ˜¯å¦æŒ‡å‘å½“å‰çº¿ç¨‹çš„æ ˆå¸§ï¼Œå¦‚æœæ˜¯å°±è¯´æ˜å½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†è¿™ä¸ªå¯¹è±¡çš„é”ï¼ˆ**é‡å…¥**ï¼Œæ¯æ¬¡è·å–è½»é‡çº§é”æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸`Lock Record`ï¼Œé”é‡å…¥æ—¶ä¼šåˆ›å»ºå¤šä¸ªæŒ‡å‘åŒä¸€ä¸ª`Object`çš„`Lock Record`ï¼Œé™¤ç¬¬ä¸€æ¬¡è®¾ç½®`Displaced Mark Word` ï¼Œåé¢å‡è®¾ç½®ä¸nullï¼‰ï¼Œé‚£å°±å¯ä»¥ç›´æ¥è¿›å…¥åŒæ­¥å—ç»§ç»­æ‰§è¡Œã€‚å¦åˆ™è¯´æ˜*å¤šä¸ªçº¿ç¨‹ç«äº‰é”*ï¼Œï¼ˆå¤šæ¬¡è‡ªæ—‹æ— æœåï¼‰è½»é‡çº§é”å°±è¦**è†¨èƒ€ä¸ºé‡é‡çº§é”*ï¼Œé”æ ‡å¿—çš„çŠ¶æ€å€¼å˜ä¸ºâ€0â€ï¼Œ`Mark Word`ä¸­å­˜å‚¨çš„å°±æ˜¯æŒ‡å‘é‡é‡çº§é”ï¼ˆäº’æ–¥é‡)çš„æŒ‡é’ˆï¼Œåé¢ç­‰å¾…é”çš„çº¿ç¨‹ä¹Ÿè¦è¿›å…¥**é˜»å¡çŠ¶æ€*ã€è€Œå½“å‰çº¿ç¨‹ä¾¿å°è¯•ä½¿ç”¨è‡ªæ—‹æ¥è·å–é”ï¼Œè‡ªæ—‹å°±æ˜¯ä¸ºäº†ä¸è®©çº¿ç¨‹é˜»å¡ï¼Œè€Œé‡‡ç”¨å¾ªç¯å»è·å–é”çš„è¿‡ç¨‹ã€
>   6. **é‡Šæ”¾é”*ï¼šåˆ©ç”¨`CAS`æ“ä½œæŠŠå½“å‰çº¿ç¨‹çš„æ ˆå¸§ä¸­çš„`Displaced Mark Word`æ›¿æ¢å›é”å¯¹è±¡çš„`Mark Word`ä¸­å»ï¼Œå¦‚æœæ›¿æ¢æˆåŠŸï¼Œåˆ™è§£é”æˆåŠŸï¼Œæ¢å¤åˆ°æ— é”çš„çŠ¶æ€ï¼ˆ01ï¼‰ã€‚è‹¥æ›¿æ¢å¤±è´¥ï¼Œåˆ™è½»é‡çº§é”è†¨èƒ€ä¸ºé‡é‡çº§é”åå†è§£é”ã€
> - é‡é‡çº§é”
>   - é‡é‡çº§é”å³ä¸ºç¬¬äºŒå±‚çš„Monitorå¯¹è±¡åŠ é”è¿‡ç¨‹ï¼Œå…¶åº”ç”¨åˆ°æ“ä½œç³»ç»Ÿçš„äº’æ–¥é‡è¿›è¡Œæ“ä½œï¼Œæ¶‰åŠåˆ°ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åˆ‡æ¢ï¼Œå¼€é”€æ¯”è¾ƒå¤§ã€
>
> 
>
> æ€»ç»“ï¼
>
> ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images16ca4f292061cb0a%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)
>
> 
>
> **synchronizedçš„ä¼˜åŒ*ï¼
>
> - **é”è†¨èƒ€**ï¼.7åï¼Œsynchronizedé‡‡ç”¨äº†é”è†¨èƒ€çš„ä¼˜åŒ–ï¼Œå¦‚åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”
>
> - **é”æ¶ˆé™*ï¼šå•çº¿ç¨‹ä¸‹é‡‡ç”¨å¹¶å‘ç±»æˆ–åŠ é”ï¼Œåˆ™é”ä¼šè¢«æ¶ˆé™¤
>
>   > ä¾‹å¦‚StringBufferæ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œå…¶å†…éƒ¨æ–¹æ³•ä½¿ç”¨Synchronizeä¿®é¥°ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ˜¯åœ¨å•çº¿ç¨‹ä¸‹ä½¿ç”¨StringBufferè¿›è¡Œå­—ç¬¦ä¸²æ“ä½œï¼Œé‚£ä¹ˆä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ˆçº¿ç¨‹å°é—­ï¼‰ï¼Œä½†æ˜¯é¢‘ç¹çš„åŠ é”å’Œè§£é”ä¼šé€ æˆæ€§èƒ½æ¶ˆè€—ï¼Œæ­¤æ—¶Javaåœ¨è¿è¡Œæ—¶ä¼šæŠŠé”æ¶ˆé™¤è¿›è¡Œä¼˜åŒ–ï¼ˆè¿è¡Œæ—¶ä¼˜åŒ–ï¼Œjavapæ— æ³•æŸ¥çœ‹ï¼‰ï¼Œå¯ä»¥åˆ©ç”¨å·¥å…·æŸ¥çœ‹Javaæœ€ç»ˆè¿è¡Œçš„æ±‡ç¼–ä»£ç ï¼Œåˆ©ç”¨æ±‡ç¼–æŒ‡ä»¤è¡¨å¯ä»¥å¯¹ç…§æŸ¥çœ‹ã€
>
> - **é”ç²—åŒ*ï¼
>
>   > ä¾‹å¦‚åœ¨forå¾ªç¯ä¸­å¾ªç¯çš„åŠ é”ï¼Œä¼šé¢‘ç¹çš„è¿›è¡ŒåŠ é”è§£é”æ“ä½œï¼Œé€ æˆæ€§èƒ½æ¶ˆè€—ï¼ŒJavaä¼šè¿›è¡Œä¼˜åŒ–ï¼Œå°†é”èŒƒå›´è¿›è¡Œæ‰©å¤§ï¼Œä¾‹å¦‚æ‰©åˆ°åˆ°forå¾ªç¯å¤–éƒ¨ã€
>
> - **è‡ªæ—‹é”*ï¼
>
>   > è½»é‡çº§é”åŠ é”å¤±è´¥åï¼Œè™šæ‹Ÿæœºä¸ºäº†é¿å…çº¿ç¨‹çœŸå®åœ°åœ¨æ“ä½œç³»ç»Ÿå±‚é¢æŒ‚èµ·ï¼Œè¿˜ä¼šè¿›è¡Œä¸€é¡¹ç§°ä¸ºè‡ªæ—‹é”çš„ä¼˜åŒ–æ‰‹æ®µã€‚è¿™æ˜¯åŸºäºåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œçº¿ç¨‹æŒæœ‰é”çš„æ—¶é—´éƒ½ä¸ä¼šå¤ªé•¿ï¼Œå¦‚æœç›´æ¥æŒ‚èµ·æ“ä½œç³»ç»Ÿå±‚é¢çš„çº¿ç¨‹å¯èƒ½ä¼šå¾—ä¸å¿å¤±ï¼Œæ¯•ç«Ÿæ“ä½œç³»ç»Ÿå®ç°çº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢æ—¶éœ€è¦ä»ç”¨æˆ·æ€è½¬æ¢åˆ°æ ¸å¿ƒæ€ï¼Œè¿™ä¸ªçŠ¶æ€ä¹‹é—´çš„è½¬æ¢éœ€è¦ç›¸å¯¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œæ—¶é—´æˆæœ¬ç›¸å¯¹è¾ƒé«˜ï¼Œå› æ­¤è‡ªæ—‹é”ä¼šå‡è®¾åœ¨ä¸ä¹…å°†æ¥ï¼Œå½“å‰çš„çº¿ç¨‹å¯ä»¥è·å¾—é”ï¼Œå› æ­¤è™šæ‹Ÿæœºä¼šè®©å½“å‰æƒ³è¦è·å–é”çš„çº¿ç¨‹åšå‡ ä¸ªç©ºå¾ªçè¿™ä¹Ÿæ˜¯ç§°ä¸ºè‡ªæ—‹çš„åŸå› )ï¼Œä¸€èˆ¬ä¸ä¼šå¤ªä¹…ï¼Œå¯èƒ½æ˜0ä¸ªå¾ªç¯æˆ–100å¾ªç¯ï¼Œåœ¨ç»è¿‡è‹¥å¹²æ¬¡å¾ªç¯åï¼Œå¦‚æœå¾—åˆ°é”ï¼Œå°±é¡ºåˆ©è¿›å…¥ä¸´ç•ŒåŒºã€‚å¦‚æœè¿˜ä¸èƒ½è·å¾—é”ï¼Œé‚£å°±ä¼šå°†çº¿ç¨‹åœ¨æ“ä½œç³»ç»Ÿå±‚é¢æŒ‚èµ·ï¼Œè¿™å°±æ˜¯è‡ªæ—‹é”çš„ä¼˜åŒ–æ–¹å¼ï¼Œè¿™ç§æ–¹å¼ç¡®å®ä¹Ÿæ˜¯å¯ä»¥æå‡æ•ˆç‡çš„ã€‚æœ€åæ²¡åŠæ³•ä¹Ÿå°±åªèƒ½å‡çº§ä¸ºé‡é‡çº§é”äº†ã€
>
>   

2. **JUC**
   - https://juejin.cn/post/6844903601534418958
   - *https://juejin.cn/post/6844903601538596877

> > **JUCåŒ…çš„ç›®å½•ç»“æ„**
>
> ![concurrentç›®å½•ç»“æ„.png](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images163260cff7a637f5%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)
>
> > **JUCåŒ…çš„æ•´ä½“å®ç°å›*
>
> ![concurrentåŒ…å®ç°æ•´ä½“ç¤ºæ„å›¾.png](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images163260cff7cb847c%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)
>
> 
>
> > **è¯´ä¸€è¯´ReentrantLock**
>
> ReentrantLockæ˜¯å¯é‡å…¥é”ï¼ˆæ’ä»–é”ï¼‰ï¼Œæä¾›äº†å…¬å¹³å’Œéå…¬å¹³ä¸¤ç§æ¨¡å¼ã€‚ä¸Synchorizedä¸åŒï¼ŒReentrantLockæ˜¯åœ¨Javaå±‚é¢å®ç°ï¼Œå…¶åº•å±‚é€šè¿‡å®ç°Lockæ¥å£ï¼Œå¹¶ç”¨AQSçš„å®ç°ç±»SyncåšåŠ é”ã€è§£é”å’Œçº¿ç¨‹åŒæ­¥ç­‰æ“ä½œã€‚ReentrantLockæœ¬èº«æ²¡æœ‰å¤ªå¤šä»£ç ï¼Œå…¶æ ¸å¿ƒä»£ç éƒ½æœ‰Syncå±æ€§åšäº†å®ç°å’Œæ“ä½œï¼Œè€ŒSyncç»§æ‰¿è‡ªAQSï¼Œæ‰€ä»¥AQSæ˜¯ReentrantLockå®ç°çš„æ ¸å¿ƒç»„ä»¶ã€
>
> 
>
> > **è¯´ä¸€è¯´AQS**
>
> AQSå³æŠ½è±¡é˜Ÿåˆ—åŒæ­¥å™¨ï¼Œå…¶é‡‡ç”¨äº†æ¨¡ç‰ˆæ–¹æ³•çš„è®¾è®¡æ¨¡å¼ï¼Œå°è£…äº†åº•å±‚åŒæ­¥çŠ¶æ€ç®¡ç†ã€çº¿ç¨‹æ’é˜Ÿã€ç­‰å¾…å’Œå”¤é†’ç­‰åº•å±‚æ“ä½œã€‚å¹¶æä¾›äº†æŠ½è±¡æ–¹æ³•ç»™å…·ä½“ç±»å®ç°ï¼Œå¦‚ç‹¬å å¼è·å–ä¸é‡Šæ”¾é”ã€å…±äº«å¼è·å–ä¸é‡Šæ”¾é”ï¼Œä¾‹å¦‚ReentrantLockæä¾›äº†å…¬å¹³å’Œéå…¬å¹³é”ä¸¤ç§æ¨¡å¼ï¼Œåº•å±‚å°±æ˜¯é€šè¿‡ç»§æ‰¿AQSå®ç°äº†ä¸¤ä¸ªé”ï¼Œå¹¶ä¸”åœ¨tryAcquireï¼ˆé”çš„è·å–ï¼‰åšä¸åŒçš„å®ç°ï¼ˆtrueåˆ™æŠ¢å é”æˆåŠŸï¼Œfalseåˆ™å¤±è´¥ï¼‰ï¼Œå…¬å¹³çš„è¿”å›falseï¼ˆAQSå°è£…äº†å…¥é˜Ÿæ“ä½œï¼‰ï¼Œéå…¬å¹³çš„ç›´æ¥æŠ¢å ï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼ˆAQSè®¤ä¸ºå…¶åŠ é”æˆåŠŸï¼‰ã€‚æ€»çš„æ¥è¯´AQSçš„ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹è¿‡ç¨‹ï¼š
>
> 1. çº¿ç¨‹è°ƒç”¨**acquire**æ–¹æ³•å°è¯•åŠ é”(CASæ”¹å˜åŒæ­¥çŠ¶æ€stateä»¥åŠè®¾ç½®å½“å‰çº¿ç¨‹ä¸ºownerçº¿ç¨‹)
> 2. æˆåŠŸåˆ™æ‰§è¡Œä¸šåŠ¡ä»£ç ï¼Œå¤±è´¥åˆ™è°ƒç”*addWaiter**æ–¹æ³•å°†çº¿ç¨‹å°è£…æˆNodeèŠ‚ç‚¹ï¼Œé€šè¿‡CASåŠ å…¥ç­‰å¾…é˜Ÿåˆ—
>    - AQSçš„ç­‰å¾…é˜Ÿåˆ—æ˜¯ä¸€ä¸*NodeèŠ‚ç‚¹ç»„æˆçš„åŒç«¯é˜Ÿåˆ*ï¼Œæœ‰è™šæ‹Ÿå¤´éƒ¨å’Œå°¾æŒ‡é’ˆ
> 3. å½“é”çš„æ‹¥æœ‰è€…æ‰§è¡Œå®Œä¸šåŠ¡é‡Šæ”¾é”åï¼Œè°ƒç”*acquireQueue**æ–¹æ³•è·å–ç­‰å¾…é˜Ÿåˆ—å¤´éƒ¨Nodeï¼ˆéè™šæ‹Ÿheadï¼‰ï¼Œè°ƒç”¨unparkå”¤é†’å¹¶è°ƒç”¨acquireè¿›è¡ŒåŠ é”æ“ä½œ
>    1. ï¼ˆç­‰å¾…é˜Ÿåˆ—ä¸­çš„é”è·å–è¿‡ç¨‹æ˜¯FIFOï¼
> 4. æˆåŠŸåˆ™è·å–é”å¹¶æ‰§è¡Œä¸šåŠ¡ï¼Œå¤±è´¥åˆ™è°ƒç”¨parké˜»å¡è¯¥èŠ‚ç‚
>
> ![ç‹¬å å¼é”è·å–ï¼ˆacquire()æ–¹æ³•ï¼‰æµç¨‹å›¾.png](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images163261637c891cc2%7Etplv-t2oaga2asx-zoom-in-crop-mark%3A3024%3A0%3A0%3A0.awebp)

3. CASï¼

> > **ABAé—®é¢˜å¦‚ä½•è§£å†³**
>
> CASå³compare and swapï¼Œå…¶å®ç°é€»è¾‘å³ï¼šåœ¨ä¿®æ”¹æŸå†…å­˜å€¼å‰ï¼Œå°†è¯¥å€¼è·Ÿé¢„æœŸå€¼åšæ¯”è¾ƒï¼Œå¦‚æœç›¸ç­‰ï¼ˆè¯´æ˜æœŸé—´æ²¡æœ‰å…¶ä»–çº¿ç¨‹è¿›è¡Œä¿®æ”¹ï¼‰ï¼Œåˆ™è¿›è¡Œä¿®æ”¹æ“ä½œï¼Œå¦åˆ™å–æ¶ˆæ“ä½œã€‚è€Œå¦‚æœå½“çº¯ç”¨å€¼åšæ¯”è¾ƒï¼Œåˆ™å¯èƒ½ä¼šå‡ºç°ABAçš„é—®é¢˜ï¼Œå³åœ¨ä¿®æ”¹è¿‡ç¨‹ä¸­ï¼Œå†…å­˜å€¼è¢«ä¿®æ”¹ä¸ºAï¼Œç„¶ååˆè¢«ä¿®æ”¹æˆBï¼Œè¿™å¯¼è‡´è·Ÿæˆ‘ä»¬çš„é¢„æœŸå€¼ä¸€è‡´ï¼Œä½†å®é™…æ˜¯ç»è¿‡äº†å¹¶å‘ä¿®æ”¹ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†ç‰ˆæœ¬å·ï¼Œæ¯æ¬¡ä¿®æ”¹è¯¥å˜é‡ï¼Œåˆ™ç‰ˆæœ¬å·åŠ ä¸€ã€
>
> Javaä¸­çš„CASæ“ä½œæ˜¯ç”±Unsafeç±»æä¾›çš„compareAndSwapXXXæ–¹æ³•æ“ä½œï¼Œæ˜¯ä¸ªåŸå­æ€§æ“ä½œï¼Œåº•å±‚æ˜¯ä¸€æCPU çš„åŸå­æŒ‡ä»¤ï¼ˆcmpxchgæŒ‡ä»¤ï¼‰ï¼Œè¯¥å‘½ä»¤åŠ äº†å†…å­˜å±éšœï¼Œä¿è¯å…¶æ‰§è¡Œçš„åŸå­æ€§åŠé”ä½å†…å­˜ã€‚æˆ‘çš„ç†è§£ï¼š
>
> - æ“ä½œå‰è®°å½•å†…å­˜å€
> - æ‰§è¡Œä¸šåŠ¡æ“ä½œï¼Œå‡†å¤‡å¥½è¦ä¿®æ”¹çš„æ–°å€
> - é€šè¿‡CASåŸå­æ€§æ“ä½œï¼ˆé€šè¿‡å†…å­˜å±éšœé”å†…å­˜ï¼Œä¿è¯CASåªæœ‰ä¸€ä¸ªæ‰§è¡Œï¼Œè€Œä¸ä¼šæœ‰ä¸¤ä¸ªCASå¹¶å‘æ‰§è¡Œï¼
>
> ```
> int prev, next;
> do {
>   prev = get();
> 	next = updateFunction.applyAsInt(prev);
> } while (!compareAndSet(prev, next));
> ```
>
> 



#### å¹¶å‘ç±»ï¼ˆThreadLocalã€Volitileã€åŸå­ç±»ã€å¹¶å‘é›†åˆï¼‰

1. ThreadLocal ç”¨è¿‡å—ï¼Ÿåº•å±‚å¦‚ä½•å®ç°çš„ï¼Ÿä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿåº”ç”¨åœºæ™¯ï¼*  2
   - *https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Java%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2078%20%E8%AE%B2-%E5%AE%8C/44%20ThreadLocal%20%E9%80%82%E5%90%88%E7%94%A8%E5%9C%A8%E5%93%AA%E4%BA%9B%E5%AE%9E%E9%99%85%E7%94%9F%E4%BA%A7%E7%9A%84%E5%9C%BA%E6%99%AF%E4%B8%AD%EF%BC%9F.md

> **é¡¹ç›®åº”ç”¨**ï¼
>
> ç”¨è¿‡ï¼ŒThreadLocalæˆ‘ä»¬ç”¨æ¥ä¿å­˜æ¯ä¸ªè¯·æ±‚çš„ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼ŒThreadLocalç›¸å½“äºä¸ºæ¯ä¸ªçº¿ç¨‹åˆ›å»ºäº†å‰¯æœ¬å˜é‡ï¼Œæ¯ä¸ªçº¿ç¨‹è·å–åˆ°çš„éƒ½æ˜¯è‡ªå·±çš„ç”¨æˆ·æ•°æ®ï¼Œè¿™æ ·æˆ‘ä»¬åªéœ€åœ¨ç½‘å…³è§£æç”¨æˆ·ä¿¡æ¯å¹¶ä¿å­˜åˆ°ThreadLocalä¸­ï¼Œåœ¨çº¿ç¨‹ç»è¿‡çš„æ–¹æ³•å¦‚æœéœ€è¦ç”¨åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œåˆ™ç›´æ¥ä»ThreadLocalè·å–å³å¯ã€
>
> **åº•å±‚å®ç°**ï¼
>
> ThreaLocalæ˜¯ç”¨æ¥è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ï¼Œä½†æ˜¯å®ƒè§£å†³çš„ä¸æ˜¯å¤šçº¿ç¨‹çš„èµ„æºå…±äº«é—®é¢˜ï¼Œè€Œæ˜¯æ¢äº†ä¸€ç§æ€è·¯ï¼Œä¸ºæ¯ä¸ªçº¿ç¨‹åˆ›å»ºå˜é‡å‰¯æœ¬ï¼Œæ‰€ä»¥å¯¹äºæœ¬èº«å°±å¸Œæœ›å¤šçº¿ç¨‹é—´æ•°æ®å…±äº«çš„åœºæ™¯ï¼ŒThreadLocalå¹¶ä¸é€‚ç”¨ï¼Œè¿™æ—¶å¯ä»¥ç”¨Synchorizedï¼Œå½“ç„¶Synchorizedä¹Ÿå¯ä»¥è§£å†³ThreaLocalçš„åœºæ™¯ä¸€çš„é—®é¢˜ï¼Œä½†æ˜¯åŠ é”å¹¶å‘æ€§èƒ½å¤§å¤§é™ä½ï¼ŒThreadLocalåˆ™å¯ä»¥ç‰ºç‰²ä¸€å®šçš„å†…å­˜ï¼Œæé«˜å¹¶å‘æ€§èƒ½ã€
>
> - Threadã€TreadLocalã€ThreadLocalMapä¸‰è€…çš„å…³ç³»ï¼šThreadLocalMapæ˜¯Threadçš„ä¸€ä¸ªå±æ€§ï¼Œåå¯çš„å…³ç³»ï¼Œè€ŒThreadLocalçš„å¼•ç”¨åˆ™ä½œä¸ºThreadLocalMapçš„keyï¼Œsetçš„å€¼åˆ™ä½œä¸ºThreadLocalMapçš„valueã€
> - ThreadLocalMapæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªEntry ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥ç†è§£ä¸ºç±»ä¼¼HashMapçš„Keyï¼ŒValueç»“æ„ï¼Œå’ŒHashMapé‡‡ç”¨æ‹‰é“¾æ³•è§£å†³å“ˆå¸Œå†²çªä¸åŒï¼ŒThreadLocalMapé‡‡ç”¨çš„æ˜¯çº¿æ€§æ¢æµ‹æ³•è§£å†³ï¼Œå³ç»§ç»­å¾€ä¸‹æ‰¾ä¸‹ä¸€ä¸ªç©ºä½ã€
> - è·å–ThreadLocalä¸­valueçš„æµç¨‹å¦‚ä¸
>   - é€šè¿‡threadLocalçš„getæ–¹æ³•è·å–
>   - getæ–¹æ³•ä¸­ä¼šè·å–å½“å‰çº¿ç¨‹å¹¶è·å–çº¿ç¨‹çš„ThreadLocalMapï¼ˆEntryæ•°ç»„ï¼‰ä¸­çš„Entry
>   - æ¥ç€ä»Entryè·å–è¯¥å€¼å¹¶è¿”å›
>
> ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesCgq2xl5M5a6ADeCKAABC52ZxZCk238.png)
>
> 
>
> **åº”ç”¨åœºæ™¯**ï¼
>
> 1. **ä¿è¯çº¿ç¨‹å®‰å…¨**ï¼*æ¯ä¸ªçº¿ç¨‹æœ‰å„è‡ªçš„å‰¯æœ¬å¯¹è±¡ï¼Œå°†åŸæœ¬å¹¶å‘çº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µå˜æˆ*çº¿ç¨‹å®‰å…¨*çš„æƒ…å†*ã€‚ä¾‹å¦‚ï¼šçº¿ç¨‹æ±+ SimpleDateFormatï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼ ThreadLocalï¼ˆåŠ äº†ThreadLocalåˆ™å®‰å…¨ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹è·å–åˆ°çš„éƒ½æ˜¯å„è‡ªçš„å‰¯æœ¬ï¼‰
> 2. **å•çº¿ç¨‹ä¸­ä¼˜é›…çš„å…±äº«å˜é‡*ï¼*æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å‰¯æœ¬å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿çš„å…±äº«ç»™å…¶ä»–æ–¹æ³•**ã€‚ä¾‹å¦‚ï¼šç”¨æˆ·ä¿¡æ¯ä¿å­˜åˆ°ThreadLocalä¸­ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ç›´æ¥è·å–ï¼Œè€Œä¸éœ€è¦é€šè¿‡å‚æ•°ä¼ é€’ã€
>
> 
>
> **ThreadLocalå¦‚ä½•è§£å†³å†…å­˜æ³„æ¼é—®é¢˜**
>
> ThreadLocalçš„å†…å­˜æ³„æ¼ä¸»è¦æ˜¯ThreadLocalMapçš„keyï¼ˆThreadLocalï¼‰å’Œvalueï¼ˆTï¼‰ï¼Œå½“çº¿ç¨‹æ‰§è¡Œå®Œä¹‹åï¼ŒThreadLocalä¸­çš„ä¿¡æ¯å·²ç»æ²¡æœ‰ç”¨äº†ï¼Œå¹¶ä¸”æ–¹æ³•æ ˆä¸­ThreadLocalçš„å¼•ç”¨ä¹Ÿæ¶ˆé™¤äº†ï¼Œä½†æ˜¯ä»ç„¶è¢«çº¿ç¨‹çš„ThreadLocalMapå¼•ç”¨ï¼Œè¿™ä¼šå¯¼è‡´GCåšå¯è¾¾æ€§åˆ†ææ—¶æ ‡å¿—ä¸ºå¯è¾¾ï¼Œé€ æˆå†…å­˜æ³„æ¼ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJDKå¼€å‘è€…åšäº†ä»¥ä¸‹æªæ–½ï¼š
>
> 1. Keyå¯¹ThreadLocalçš„å¼•ç”¨é‡‡ç”¨è™šå¼•ç”¨ï¼Œæ‰€ä»¥å½“çº¿ç¨‹æ‰§è¡Œå®Œä¸šåŠ¡åï¼Œè™šå¼•ç”¨çš„Keyå¯ä»¥è¢«GCã€‚å¹¶ä¸”åœ¨æ‰§è¡Œ ThreadLocal çšsetã€removeã€rehash ç­‰æ–¹æ³•æ—¶ï¼Œä¼šæ‰«ækeyä¸ºnullçš„entryï¼Œå°†å…¶valueå€¼ç½®ä¸ºnullï¼Œä»¥ä¿è¯valueå€¼å¯ä»¥è¢«GCã€
> 2. ä½†æ˜¯è¿˜æ˜¯ä¼šæœ‰é—®é¢˜ï¼Œå‡è®¾ThreadLocalä¸å†è¢«ä½¿ç”¨ï¼Œå¹¶ä¸”çº¿ç¨‹åˆä¸€ç›´å­˜æ´»ï¼Œé‚£ä¹ˆvalueè¿˜æ˜¯ä¼šæœ‰å†…å­˜æ³„æ¼é—®é¢˜ï¼Œæ‰€ä»¥ä¸ºäº†ä¿è¯å…¶å¯ä»¥è¢«æ­£å¸¸å›æ”¶ï¼Œåœ¨ä½¿ç”¨å®ŒThreadLocalåï¼Œä¼šè°ƒç”¨å…¶removeæ–¹æ³•å°†valueå€¼åˆ é™¤ã€
>
> ![img](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesCgq2xl5Pld-AHFhJAADLtGXmSxc833.png)

2. ç”¨è¿‡åŸå­ç±»å—ï¼Ÿç­”AtomicIntegerï¼Œé—®å®ƒçš„åŸç†ï¼

> AtomicIntegeræ˜¯JUCçš„AtomicåŒ…ä¸‹çš„ç±»ï¼Œå¯ä»¥åœ¨å¤šçº¿ç¨‹å¹¶å‘çš„æƒ…å†µä¸‹å¯¹å…¶è¿›è¡Œè®¡ç®—æ“ä½œï¼Œåº•å±‚é‡‡ç”¨ä¹è§‚é”å®ç°ï¼Œå³volitile+CASå»æ›´æ–°value å€¼ï¼Œå…¶ä¸­volitileä¿è¯äº†valueåœ¨å¤šçº¿ç¨‹ä¸‹çš„å¯è§æ€§ï¼ŒCASä¿è¯äº†å…¶å¹¶å‘ä¿®æ”¹çš„å®‰å…¨æ€§ã€

3. è¯´è¯´volitileï¼ˆå¼•å‡ºå•ä¾‹ï¼‰

> volitileæ˜¯Javaä¸­ç”¨äºè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ç±»ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯è½»é‡ç‰ˆçš„synchorizedï¼Œvolitileåªè§£å†³å¤šçº¿ç¨‹ä¸‹çš„å¯è§æ€§åŠæŒ‡ä»¤é‡æ’å¸¦æ¥çš„å®‰å…¨æ€§é—®é¢˜ï¼Œè€Œä¸è§£å†³åŸå­æ€§é—®é¢˜ã€
>
> - **å¯è§æ€*ï¼šå¯è§æ€§é—®é¢˜å‡ºç°çš„åŸå› æ˜¯ç”±äºCPUå’Œä¸»å­˜çš„è¿è¡Œé€Ÿåº¦ç›¸å·®å¤ªå¤§ï¼Œä¸ºäº†æå‡CPUçš„ä½¿ç”¨ç‡ï¼Œåœ¨å…¶ä¸¤è€…é—´åŠ å…¥äº†äº†ç¼“å­˜ï¼Œçº¿ç¨‹å¯¹å€¼çš„ä¿®æ”¹éƒ½ä¼šå…ˆå†™å…¥ç¼“å­˜ï¼Œå†å†™å…¥å†…å­˜ä¸­ï¼Œå•çº¿ç¨‹ä¸‹æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å¦‚æœå¤šçº¿ç¨‹ä¸‹ï¼Œè€ŒCPUåˆæ‹¥æœ‰å¤šæ ¸ï¼Œé‚£ä¹ˆä¸åŒçº¿ç¨‹ä¿®æ”¹çš„å€¼éƒ½æ›´æ–°åœ¨å„è‡ªéƒ½CPUæ ¸å¯¹åº”çš„ç¼“å­˜ä¸Šï¼Œå¯¼è‡´å‡ºç°å¯è§æ€§é—®é¢˜ï¼Œvolitileè§£å†³çš„å°±æ˜¯è¿™ä¸ªé—®é¢˜ï¼Œè¢«volitileä¿®é¥°çš„å˜é‡çš„ä¿®æ”¹ä¼šè¢«ç›´æ¥æ›´æ–°åˆ°ä¸»å­˜ï¼Œè¯»å–ä¹Ÿæ˜¯ä»ä¸»ä»ä¸­è¯»å–ï¼Œè¿™æ ·å³è§£å†³äº†å¤šçº¿ç¨‹ä¸‹çš„å¯è§æ€§é—®é¢˜ã€
> - **æŒ‡ä»¤é‡æ’**ï¼šä»¥æ™®é€šæ‡’æ±‰å¼å•ä¾‹æ¨¡å¼ä¸ºä¾‹å­ï¼Œå½“æˆ‘ä»¬è·å–å•ä¾‹æ—¶ï¼Œä¼šå…ˆæ£€æŸ¥è¯¥å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºå°±è¿”å›ï¼Œå•çº¿ç¨‹ä¸‹æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯å¤šçº¿ç¨‹å¹¶å‘æ“ä½œä¸‹ï¼Œè¿”å›çš„å®ä¾‹å¯èƒ½ç”±äºæŒ‡ä»¤é‡æ’è¿˜æ²¡è¢«å®ä¾‹åŒ–ï¼Œè¿›è€Œå¯¼è‡´å‡ºé”™ã€‚é€šå¸¸åˆ›å»ºå®ä¾‹çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼šç±»åŠ è½- è·å–ç±»å…ƒä¿¡æ¯ - ç”³è¯·å†…å­˜ - æ ¹æ®ç±»å…ƒä¿¡æ¯åˆ›å»ºå®ä¾‹ - è¿”å›å†…å­˜åœ°å€åˆ°æ–¹æ³•æ ˆï¼Œä½†æ˜¯æŒ‡ä»¤é‡æ’å¯èƒ½å¯¼è‡´åœ¨ç”³è¯·å†…å­˜åç›´æ¥è¿”å›åœ°å€ï¼Œç„¶åæ‰æ˜¯åˆ›å»ºå®ä¾‹ï¼Œè€Œå¦‚æœè¿”å›åˆ°åœ°å€è¢«å…¶ä»–çº¿ç¨‹è°ƒç”¨ï¼Œåˆ™ä¼šå‡ºç°å¯¹è±¡ä¸ä¸ºç©ºä½†æ˜¯è¿˜æ²¡å®ä¾‹å¥½å¯¼è‡´å‡ºé”™ã€

4. å¹¶å‘é›†åˆï¼ˆå¼•å‡ºé›†åˆç±»ï¼

> ![image](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesjava-thread-x-juc-overview-2.png)
>
> **CopyOnWriteArrayList**
>
> åŸç†ï¼šåº•å±‚é‡‡ç”¨åå°+ ReentrantLockä¿è¯çº¿ç¨‹å®‰å…¨é—®é¢˜
>
> - è¯»ä¸åŠ é”
> - å†™åŠ é”ï¼ˆå¯é‡å…¥é”ï¼‰ï¼Œå¤åˆ¶æ–°æ•°ç»„ï¼Œå¾€æ–°æ•°ç»„å†™å…¥æ–°å…ƒç´ ï¼Œå°†æ•°ç»„å¼•ç”¨æŒ‡å‘å¤åˆ¶çš„æ•°ç»
>
> ä½¿ç”¨åœºæ™¯ï¼šè¯»å¤šå†™å°‘ï¼Œä¸”æ•°æ®é‡ä¸å¤§çš„åœºæ™
>
> ç¼ºç‚¹ï¼
>
> - æ€§èƒ½é—®é¢˜ï¼šç”±äºå†™æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦æ‹·è´æ•°ç»„ï¼Œä¼šæ¶ˆè€—å†…å­˜ï¼Œå¦‚æœåŸæ•°ç»„çš„å†…å®¹æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å¯¼è‡´young gcæˆ–è€…full gcï¼ˆå¤§å¯¹è±¡åˆ›å»ºï¼
> - ä¸€è‡´æ€§é—®é¢˜ï¼šä¸èƒ½ç”¨äºå®æ—¶è¯»çš„åœºæ™¯ï¼Œåƒæ‹·è´æ•°ç»„ã€æ–°å¢å…ƒç´ éƒ½éœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥è°ƒç”¨ä¸€ä¸ªsetæ“ä½œåï¼Œè¯»å–åˆ°æ•°æ®å¯èƒ½è¿˜æ˜¯æ—§çšè™½ç„¶CopyOnWriteArrayList èƒ½åšåˆ°æœ€ç»ˆä¸€è‡´æ€ä½†æ˜¯è¿˜æ˜¯æ²¡æ³•æ»¡è¶³å®æ—¶æ€§è¦æ±‚ï¼›
>
> 
>
> **ConcurrentHashMap**
>
> åŸç†ï¼šæ•°ç»+ æ‹‰é“¾æ³
>
> HashMapä¸ºä»€ä¹ˆæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼
>
> - Putï¼šå…ƒç´ æ“ä½œæ²¡æœ‰åŠ é”ï¼Œå­˜åœ¨å¹¶å‘è¦†ç›–é—®é¢˜ï¼Œä¾‹å¦‚putæ–¹æ³•ï¼Œå¹¶å‘ä¸‹å¯¹ç©ºå…ƒç´ çš„ä½ç½®æ·»åŠ å…ƒç´ ï¼Œä¼šå‡ºç°è¦†ç›–é—®é¢
> - modCount++ã€size++ï¼šè®¡æ•°æ“ä½œéåŸå­æ€§ï¼Œå­˜åœ¨å¹¶å‘å®‰å…¨é—®é¢˜
> - æ•°ç»„æ‰©å®¹ï¼šå¹¶å‘æ“ä½œå­˜åœ¨é€ æˆæ­»å¾ªç¯çš„é£é™©
>
> ConcurrentHashMap åœ¨JDK1.8å‰åçš„åŒºåˆ«ï¼Ÿ
>
> - 1.7ä¹‹å‰ï¼šé‡‡ç”¨Segmentåˆ†æ®µé”ï¼Œè€ŒSegmentç»§æ‰¿è‡ªReentrantLock
>
> 
>
> **LinkedBlockingQueue**
>
> - LinkedBlockingQueueå®ç°äº†BlockingQueueæ¥å£ï¼Œåº•å±‚é‡‡ç”¨é“¾è¡¨å¯¹å…ƒç´ è¿›è¡Œå­˜å‚¨ï¼Œå¯ä»¥è®¾ç½®é“¾è¡¨é•¿åº¦ï¼Œé»˜è®¤ä¸ºInteger.MAX_VALï¼Œå…¶é‡‡ç”¨FIFOçš„æ–¹å¼è¿›è¡Œå…ƒç´ å‡ºé˜Ÿï¼Œå¹¶ä¸”é‡‡ç”¨ReentrantLockè¿›è¡ŒåŠ é”å¤„ç†ï¼Œä¿è¯å¹¶å‘å®‰å…¨ã€‚åƒå®šé•¿çº¿ç¨‹æ± å’Œå•çº¿ç¨‹çº¿ç¨‹æ± éƒ½é‡‡ç”¨LinkedBlockingQueueä½œä¸ºå…¶é˜»å¡é˜Ÿåˆ—ã€
>
> - BlockingQueueï¼šBlockingQueueæ˜¯ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—æ¥å£ï¼Œå®šä¹‰äº†å››ç»„ä¸åŒçš„æ–¹æ³•ç”¨äºæ’å…¥å’Œç§»é™¤é˜Ÿåˆ—å…ƒç´ ï¼ˆputå’Œtakeä¸ºé˜»å¡çš„ï¼Œå…¶ä»–å¤±è´¥éƒ½ä¼šè¿”å›æˆ–è€…æŠ›å¼‚å¸¸ï¼‰ï¼Œå¸¸ç”¨ä¸ä½œä¸ºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œç”Ÿäº§è€…å°†ä»»åŠ¡putå…¥é˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…ä»å¦å¤–ä¸€ç«¯takeå‡ºã€
>
>   ![image-20220711003303473](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesimage-20220711003303473.png)
>
> 
>
> **SynchronousQueue**
>
> - ç”¨äºå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œé˜Ÿåˆ—å®¹é‡ä¸º0ï¼Œåªæä¾›é˜»å¡ä½œç”¨ï¼Œå½“ä»»åŠ¡æ¥æ—¶é˜»å¡ç›´åˆ°çº¿ç¨‹æ± takeã€



### JVM

- **å¯¹è±¡ä»äº§ç”Ÿåˆ°æ¶ˆäº¡çš„è¿‡ç¨*ï¼ˆç±»åŠ è½½ã€å†…å­˜åˆ†é…ã€å¯¹è±¡åˆ›å»ºã€ä»£ç è¿è¡Œã€GCï¼ˆåƒåœ¾æ ‡è¯†ã€åƒåœ¾å›æ”¶ï¼‰



GCï¼

- Minor gc ã€Major gcå’Œfull gcçš„åŒºåˆ
- å †å†…å­˜çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼ˆå¼•å‡ºåƒåœ¾æ ‡è¯†ç®—æ³•ã€åƒåœ¾å›æ”¶å™¨ï¼
- Full GCåœºæ™¯
- è¯´ä¸€ä¸‹GC
- GCæœºåˆ¶



JVMè°ƒä¼˜

- æœ‰è¿‡è°ƒä¼˜ç»éªŒå



JMM

- æè¿°ä¸€ä¸‹Javaå†…å­˜æ¨¡å‹
  - JVMæ“ä½œæ 
  - æœ¬åœ°æ–¹æ³•æ 
  - ç¨‹åºè®¡æ•°å™
  - å 
  - å…ƒæ–¹æ³•åŒºï¼ˆå¼•å‡ºç±»åŠ è½½è¿‡ç¨‹ï¼
- Javaçš„å†…å­˜åˆ†é…è¿‡ç¨
- HotSpot ä¸­çš„æŒä¹…ä»£æŒ‡çš„æ˜¯å“ªä¸ªåˆ†åŒºï¼
- å †çš„åˆ†åŒºæ˜¯æ€æ ·çš„ï¼Ÿï¼ˆå¼•å‡ºå¯¹è±¡ä»youngåŒºåˆ°oldåŒºåˆ°æ•´ä¸ªè¿‡ç¨‹ï¼Œæ¥ç€å¼•å‡ºGCï¼
- Javaå †æ ˆçš„åŒºåˆ
- *ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”ŸOOMï¼Ÿï¼ˆé™¤äº†ä»£ç é—®é¢˜å¤–ï¼Œå¯ä»¥å¼•å‡ºGCé—®é¢˜ï¼
  - é‡åˆ°è¿‡å†…å­˜æ³„æ¼é—®é¢˜å—ï¼

ç±»åŠ è½½æœºåˆ

- å…³äºJVM ç±»åŠ è½½å™¨æœºåˆ¶



## é¡¹ç›®ç»å†

![image-20220725234347983](https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/imagesimagesimage-20220725234347983.png)



### é¡¹ç›®çŸ¥è¯†ç‚¹ï¼ˆRootï¼

#### 1. PCMï¼šåˆ†å¸ƒå¼äº‹åŠ¡ã€æ•°æ®åº“ã€åˆ†å¸ƒå¼é”

å¾®æœåŠ¡ï¼šDDDå¾®æœåŠ¡æ‹†åˆ†ï¼ŒSwifæ–¹æ³•è®

- *æ—§ç³»ç»Ÿä¸ºä»€ä¹ˆè¦è¿›è¡Œæ‹†åˆ†ï¼
  - ***OOM**
  - æ¡†æ¶è€æ—§ã€ç»´æŠ¤å›°éš
  - æœåŠ¡è€¦åˆï¼Œç›¸äº’å½±å“ï¼Œç‰ˆæœ¬æ§åˆ¶å›°éš¾
- æœåŠ¡æ‹†åˆ†æˆäº†å‡ ä¸ªï¼Ÿéƒ¨ç½²äº†å¤šå°‘å®ä¾‹ï¼Ÿå•è¡¨é‡æœ€å¤§å¤šå¤§ï¼Ÿ

æ•°æ®è¿ç§»ï¼*åˆ†å¸ƒå¼äº‹åŠ*ã€æ•°æ®é‡çº§ã€MySQL

- åˆ†å¸ƒå¼äº‹åŠ¡ï¼šå¼ºä¸€è‡´æ€§äº‹åŠ
- æ•°é‡çº§ï¼š**åƒä¸‡çº§æ•°æ*æŒ‰ç…§ä¸šåŠ¡ï¼ˆcheckpointï¼‰è¿›è¡Œæ¨ªå‘æ‹†åˆ†åˆ°ä¸åŒæœåŠ¡ä¸
- MySQLï¼*åˆ†åº“ã€ç´¢å¼*

åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡ï¼šQuartz-**åˆ†å¸ƒå¼é”**

- åˆ†å¸ƒå¼é”ï¼šReidsã€Zookeeperã€æ•°æ®åº“

è§„åˆ™ç¼–æ’ï¼šDroolåŸç†ã€å¥½å¤

æµ‹è¯•è¦†ç›–ï¼šå•å…ƒæµ‹è¯•ï¼ˆå•æ–¹æ³•ï¼‰ã€ç»„ä»¶æµ‹è¯•ï¼ˆå•æœåŠ¡ï¼‰ã€E2Eæµ‹è¯•ï¼ˆå¤šæœåŠ¡ï¼



#### 2. æ™ºæ…§æœåŠ¡åŒºï¼šKafkaã€Redisã€Nettyã€è®¾è®¡æ¨¡å¼ã€Restful

- Redisï¼šåŸºç¡€æ•°æ®ç¼“å­˜ã€å¹‚ç­‰æ€§å¤„ç
- Kafkaï¼šæœ‰åºæ€§å¤„ç†ã€å¯é æ€§å¤„ç†ï¼ˆæ‰‹åŠ¨ACKï¼
- Nettyï¼šNIOå¼€å‘ã€TCPåè®®
- è®¾è®¡æ¨¡å¼ï¼šå·¥å‚æ¨¡å¼æƒ…æŠ¥æ¿åè®®åŒ…ï¼Œå…¶ä»–çš„ä¾‹å¦‚å•ä¾‹æ¨¡å¼ã€æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼
- Restfulï¼šè¯·æ±‚æ–¹æ³•ã€æ¥å£å‘½åè®¾è®¡ã€Http



### é¡¹ç›®éš¾ç‚¹



PCMï¼

- æœåŠ¡æ‹†åˆ†
- æ•°æ®è¿ç§»ï¼ˆæ•°æ®ä¸€è‡´æ€§ï¼‰
- å•ä½“->åˆ†å¸ƒå¼ï¼Œå¼•å…¥åˆ†å¸ƒå¼äº‹åŠ¡ã€åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡
- è§„åˆ™ç¼–æ’ï¼šç±»ä¼¼äºJavaçº¿ç¨‹çš„çŠ¶æ€è½¬åŒ–ï¼Œè®¢å•ä¹Ÿæœ‰å…¶ç”Ÿå‘½å‘¨æœŸï¼ŒçŠ¶æ€ä¸Javaçº¿ç¨‹çŠ¶æ€ç±»å‹ï¼Œè€Œå¾€å¾€èˆªè¿ä¸­çš„è®¢å•çŠ¶æ€çš„è½¬æ¢æ¯”è¾ƒå¤æ‚ï¼Œå½±å“çŠ¶æ€çš„å› ç´ åˆæ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬å¾ˆéš¾é€šè¿‡ç¼–å†™ç¡¬ä»£ç å»å®ç°â€œæŸä¸ªå˜é‡å˜åŒ–äº†ï¼Œå»é“¾å¼çš„æ›´æ–°å…¶çŠ¶æ€â€ï¼ˆå³å˜åŒ–æœ¬èº«ä¹Ÿä¼šä½œä¸ºå˜é‡å»å½±å“å…¶ä»–ï¼‰ï¼Œdroolsåˆ™å°è£…äº†åº•å±‚çš„é“¾è·¯ï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™å¥½è§„åˆ™ï¼šã€å˜é‡ã€è¡Œä¸ºã€‘å³å

æ™ºæ…§æœåŠ¡åŒºï¼š

- å‰©ä½™åœè½¦ä½è®¡ç®—ï¼š
  - å¤šçº¿ç¨‹å¹¶å‘å¢å‡
  - å¹‚ç­‰æ€§å¤„ç
  - æ‰‹åŠ¨acké˜²æ­¢è½¦è¾†æ•°æ®ä¸¢å¤±
- åŸºç¡€è®¾å¤‡é€šä¿¡ï¼šNetty
  - æƒ…æŠ¥æ
  - æ°´ç”µè®¾å¤‡
  - è®¾å¤‡çŠ¶æ€ï¼ˆsnmpï¼
- æ¶ˆæ¯é˜Ÿåˆ—äº‹ç‰©ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨-æŸ”æ€§äº‹ç‰©ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€



## æˆ‘è¦é—®çš„

1. è¯·é—®æ˜¯å¤–åŒ…å—ï¼
2. è¯·é—®ä¸€å…±æœ‰å‡ è½®é¢è¯•ï¼Ÿå¤šä¹…ä¼šæœ‰ç»“æœé€šçŸ¥ï¼
3. è¯·é—®éƒ¨é—¨åšçš„é¡¹ç›®ä¸»è¦æ˜¯ä»€ä¹ˆç±»å‹çš„





## é¢è¯•é¢

### CVTE

- https://www.nowcoder.com/discuss/917826?type=all&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_all_nctrack&gio_id=9B179C1C22CC722DBBC116E475A9AFD2-1654668824810
- https://www.nowcoder.com/discuss/857854?type=all&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_all_nctrack&gio_id=9B179C1C22CC722DBBC116E475A9AFD2-1654668824810
- https://www.nowcoder.com/discuss/917826?type=post&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_post_nctrack
- https://www.nowcoder.com/discuss/827803?type=post&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_post_nctrack
- https://www.nowcoder.com/discuss/786302?type=post&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_post_nctrack
- https://www.nowcoder.com/discuss/779334?type=post&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_post_nctrack
- https://www.nowcoder.com/discuss/627151?type=post&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_post_nctrack



### é‡‘å±±

- WPSï¼šhttps://www.nowcoder.com/discuss/experience/company?tagId=1046
  - https://www.nowcoder.com/discuss/73974
  - https://www.nowcoder.com/discuss/659778?source_id=&channel=
  - https://www.nowcoder.com/discuss/657896?source_id=&channel=
  - https://www.nowcoder.com/discuss/635511?source_id=&channel=
  - https://www.nowcoder.com/discuss/634811?source_id=&channel=
  - https://www.nowcoder.com/discuss/584694?source_id=&channel=
  - https://www.nowcoder.com/discuss/546327?source_id=&channel=
  - https://www.nowcoder.com/discuss/540803?source_id=&channel=
  - https://www.nowcoder.com/discuss/797239?source_id=&channel=

- é‡‘å±±äº‘ï¼šhttps://www.nowcoder.com/discuss/experience/company?tagId=1003
  - https://www.nowcoder.com/discuss/98899?source_id=&channel=
  - https://www.nowcoder.com/discuss/94884?source_id=&channel=
  - https://www.nowcoder.com/discuss/93663?source_id=&channel=



### ç‰›å®¢ç½‘å…¶ä»

- *https://www.nowcoder.com/discuss/855750?source_id=profile_create_nctrack&

