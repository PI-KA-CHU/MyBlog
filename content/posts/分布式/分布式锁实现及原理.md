+++

author = "pikachu"
title = "分布式锁实现及原理"
date = "2022-05-09"
description = "基于数据库，Redis，Zookeeper"
draft = true
tags = [
    "分布式","redis","mysql"
]
categories = [
    "it"
]

+++



## 一、分布式锁的原理

**场景**：多实例的代码块同步（单实例通信基于本机环境，多实例通信借助第三方）

​		锁通常用于做代码块的**同步**，保证同段代码在**多线程**情况下同一时间只能被一个线程执行。Java中用于锁操作的有**Synchronize**和**ReentranLock**，但是两者都是基于单机应用的情况下使用，对于分布式系统，同个服务会有多个实例被启动（例如多实例下保证单个定时任务执行），那么对于这种场景下的代码块同步就不能按常规处理，只能借助第三方让各个实例进行通信，进而达到锁的控制效果，目前分布式锁常见的实现方式有：**基于数据库行锁**、**基于Redis锁**、**基于Zookeeper锁**。

**流程**：多实例做锁的抢占，**加锁**成功的获取到锁并执行相关代码块，此时其他实例获取锁失败，完成操作后**解锁**。





## 二、分布式锁的实现方案及优缺点



### 基于数据库的分布式锁







### 基于Redis的分布式锁







### 基于Zookeeper的分布式锁