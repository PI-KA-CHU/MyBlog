# 自我介绍

​		面试官你好，我叫曾博佳，毕业于北京师范大学珠海分校软件工程专业。开发技能上主要以Java语言为主，有扎实的Java基础和良好的编码风格，熟悉并发编程、JVM及锁知识，开发模式上熟悉以SpringBoot、SpringCloud为主的Web开发模式，但是最近有人了解到Go语言，也有意愿学习和转语言。目前的工作经历主要有两段，第一是做国际航运生命周期编排系统开发，特点是采用敏捷开发、微服务开发，采用K8S服务网格做微服务容器编排和部署。第二是在一家交通行业公司做智慧服务区的开发，它的特点主要是物联网、基础设备状态采集、微服务开发。最后做一个自我评价，我是一个比较上进，有较好的自我驱动力及抗压能力，像目前我的状态就处于压力比较大的环境，但是我相信我能够打破这种现状，也希望能够得到反馈，不断修正和提升自我。



# 如何编写简历

- https://juejin.cn/post/6844904034218803214#heading-6



# 面试记录



CVTE一轮面试：

1. JVM
   1. 旧系统的OOM？OOM如何做检测和检查？
   2. 垃圾回收器
      1. 垃圾回收器有哪些？G1和CMS的区别？回收流程是什么？适合在什么场景？
      2. 新生代老年代的垃圾回收策略
   3. 标记-整理和标记-清除的区别？
   4. 做过哪些JVM上的优化？
   5. 如何检查线程数量，可以通过哪些方式去检查？JDK自带哪些工具？

2. 项目
   1. 旧系统为什么要进行拆分？
      1. 出现OOM？哪些OOM？内存泄露？线程创建过多？
      2. 线上部署了几个实例？
      3. 服务耦合，相互影响，版本控制困难。
   2. 微服务监控怎么做的？如何评估服务需要扩容？如何及时发现系统异常情况？
   3. 难点是什么？如何解决的？
   4. 拆分成多少个服务？微服务拆分时间多长？
   5. 数据库也是做了拆分吗？按数据表做垂直拆分？保证数据一致性（分布式事务）
   6. 单表数据量是多大？
   7. 采用了什么消息队列？为什么要用消息队列做服务通信而不用spring cloud？
   8. 项目采用了DDD，在微服务中DDD是如何分层的？
   9. 自己学习了什么知识？应用到项目了吗？
      1. 分布式事务
      2. 分布式ID
      3. redis bitmap
      4. 幂等性处理、有序性处理、可靠性处理
      5. netty nio采集
3. MySQL（回答的还可以）
   1. 如何进行优化？
   2. 索引结构有哪些？
   3. 有做分库分表吗？
   4. MySQL锁有哪些？间隙锁的作用是什么？（隔离级别：可重复读，解决幻读）
   5. 需要重点了解：死锁及解决思路



# 面试准备

## 中间件



### Redis

- 场景：https://www.nowcoder.com/discuss/953289?type=all&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_all_nctrack&gio_id=7A239D7C6F1FE3A8AAC731BCD696C405-1655743167774
- 高频面试题：https://www.nowcoder.com/discuss/945665?type=all&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_all_nctrack&gio_id=7A239D7C6F1FE3A8AAC731BCD696C405-1655743167774



Redis用在什么场景？

- 已用：

  - 缓存统计信息、基础用户信息、接口权限信息
  - 幂等性处理（引出Kafka）
    - 四种解决幂等方案：https://juejin.cn/post/6906290538761158670
    - 卡口车辆驶入，会出现重复消费的问题吗？会有的
      - 比如卡口对同一辆车可能会传多份照片
      - Kafka是autocommit机制
        - 如果消费者还没来得及commit就重启，重启后会从kafka拉取未过更新的offset，则会造成重复消费。
        - 如果commit了，但是MQ宕机导致接收不到，则重启后会重复消费
  - bitmap统计设备在线，减少数据库压力
- 可用
  - 简单消息队列
  - 分布式锁



Redis应用到了哪些数据结构（缓存）？

- String（缓存统计数据，提高读性能）
- 哈希（服务区的map作为缓存）
- List（卡口基本数据）



### Netty

- 通俗的理解Netty：https://www.zhihu.com/question/24322387
- *Netty知识：https://juejin.cn/post/6844903703183360008
- 面试题：
  - https://www.nowcoder.com/discuss/832208?type=all&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_all_nctrack&gio_id=9B179C1C22CC722DBBC116E475A9AFD2-1656053990442
  - https://juejin.cn/post/6999225355374428168
  - 阿里大牛：https://zhuanlan.zhihu.com/p/148726453



Netty用在什么场景？

- 作为基础设备通信框架，例如采用NIO做情报板通信



### Kafka



Kafka用在什么场景？

- Kafka用于接收情报板、事件检测及其他设备采集的消息，用于与系统服务的解耦，可用做流量控制
- 情报板发送需要保证**有序性**，防止情报板覆盖，采用情报板code作为partitionKey，防止乱序导致的覆盖问题。
- 卡口数据接收需要**防止消息丢失**，采用手动ack机制，保证业务正常后再提交ack。
- Kafka采用最大努力通知配置，BASE理论，柔性事务最终一致性。PCM采用最大努力通知，服务区采用本地消息表
- Kafka的重复消费问题
  - https://juejin.cn/post/7002778713943343117
- *Kafka性能、可靠性问题
  - https://juejin.cn/post/7018702635544870948
- Kafka扫盲
  - https://juejin.cn/post/7012815379772768264#heading-3



目前系统可能存在的问题：

1. 如果卡口车辆进入后，业务代码异常，导致消息丢失，如何处理？（车辆实际进去了，但是车位占用数据没有录入，并且卡口消息被消费了）
   1. 开启手动ack机制，业务完成后再ack，防止消息丢失
2. 如果前面正常，但是在发布情报板的时候异常，导致消息没发送出去，如何处理？



手动提交ack和本地消息表的区别：

- 手动提交ack主要用于防止业务异常导致消息没有被正常消费的问题，而不能保证消息在传输过程中的其他问题（例如*上游服务宕机导致消息没有被发送、MQ宕机导致消息直接丢失等的问题，MQ可以有副本机制，但是也是最大程度的去避免丢失问题）
  - 服务区应用：卡口车辆通过手动ack，防止业务异常导致消息丢失，进而导致车辆出入卡口数据不能被更新，停车位识别出现问题。
- 本地消息表则可以确保**最终一致性原则**（无论如何都会可以保证数据最终一致），因为其原理是在入口处就保存了请求，例如支付后先通过事务【执行支付业务并插入本地消息表】，然后发送支付消息到MQ，通过定时任务监控本地消息表保证后续业务正常执行（后续业务执行成功后会发MQ做确认），发现还没有完成则重新发送MQ，因此存在重复消费问题，需要对接口做幂等处理。
  - 服务区应用：情报板发布后插入情报板相关业务数据，需要发送情报板更新的消息到另一个服务进行对接更新，如果消息在过程丢失，将会出现情报板已经发布但是没有更新的情况，因此引入本地消息表，事务【执行业务数据+插入本地消息表】，通过定时任务查看该条消息对应的需要更新的业务是否已经完成，没有完成则重新发送。



## Java

### Java并发编程



线程：

1. Java中线程的状态有哪些？

2. 创建线程的方式有哪些？关闭线程的方法是什么？

3. 守护线程是什么？

4. 线程、进程和协程的区别

   1. 为什么协程的性能好（GO）

5. *线程、进程的中断过程是怎么样的？

6. 说说sleep、wait方法的区别（引出线程间状态的变换）

   

多线程

1. 怎样理解线程安全？

2. *线程的同步方式

3. *线程间的如何进行通信？

4. 多线程开发过吗？通信方式有哪些？

5. 多线程的理解（why、what、how，引出threadlocal、并发集合、volitile、同步方式（锁））

6. 多进程(继承什么, 不继承什么)，进程间的通信

7. 线程池

   1. *常见的线程池有哪几种？如果线程池爆了会怎样？ - ？

   2. 实现线程池，你觉得核心是什么

   3. 线程池及参数，maximumSize 怎么达到；（线程池拒绝策略、核心线程等原理）

   4. 线程池相关工具类介绍

      

线程同步（锁） 

- Java有哪些锁，分别适用于哪些场景
- synchronized：
  - 锁（synchronized 和 Lock），synchronized 加到普通方法和静态方法的区别，一个类的两个方法都加了 synchronized，是一个锁还是两个锁； - ？
  - synchronized的方法同步和代码块同步区别
  - 类加锁，static方法加锁是加锁什么对象
- CAS：
  - ABA问题如何解决



并发类

- ThreadLocal 用过吗？底层如何实现的？作用是什么？应用场景？ *  2
- 用过原子类吗？答AtomicInteger，问它的原理；
- 说说volitile
- 并发集合（引出集合类）



### JVM

- **对象从产生到消亡的过程**（类加载、内存分配、对象创建、代码运行、GC（垃圾标识、垃圾回收）



GC：

- Minor gc 、Major gc和full gc的区别
- 堆内存的垃圾回收算法（引出垃圾标识算法、垃圾回收器）
- Full GC场景
- 说一下GC
- GC机制



JVM调优

- 有过调优经验吗



JMM

- 描述一下Java内存模型
  - JVM操作栈
  - 本地方法栈
  - 程序计数器
  - 堆
  - 元方法区（引出类加载过程）
- Java的内存分配过程
- HotSpot 中的持久代指的是哪个分区？
- 堆的分区是怎样的？（引出对象从young区到old区到整个过程，接着引出GC）
- Java堆栈的区别
- *什么情况下会发生OOM？（除了代码问题外，可以引出GC问题）
  - 遇到过内存泄漏问题吗？

类加载机制

- 关于JVM 类加载器机制








## 我要问的

1. 请问是外包吗？
2. 请问一共有几轮面试？多久会有结果通知？
3. 请问部门做的项目主要是什么类型的





## 面试题

### CVTE

- https://www.nowcoder.com/discuss/917826?type=all&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_all_nctrack&gio_id=9B179C1C22CC722DBBC116E475A9AFD2-1654668824810
- https://www.nowcoder.com/discuss/857854?type=all&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_all_nctrack&gio_id=9B179C1C22CC722DBBC116E475A9AFD2-1654668824810
- https://www.nowcoder.com/discuss/917826?type=post&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_post_nctrack
- https://www.nowcoder.com/discuss/827803?type=post&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_post_nctrack
- https://www.nowcoder.com/discuss/786302?type=post&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_post_nctrack
- https://www.nowcoder.com/discuss/779334?type=post&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_post_nctrack
- https://www.nowcoder.com/discuss/627151?type=post&order=recall&pos=&page=1&ncTraceId=&channel=-1&source_id=search_post_nctrack



### 金山

- WPS：https://www.nowcoder.com/discuss/experience/company?tagId=1046
  - https://www.nowcoder.com/discuss/73974
  - https://www.nowcoder.com/discuss/659778?source_id=&channel=
  - https://www.nowcoder.com/discuss/657896?source_id=&channel=
  - https://www.nowcoder.com/discuss/635511?source_id=&channel=
  - https://www.nowcoder.com/discuss/634811?source_id=&channel=
  - https://www.nowcoder.com/discuss/584694?source_id=&channel=
  - https://www.nowcoder.com/discuss/546327?source_id=&channel=
  - https://www.nowcoder.com/discuss/540803?source_id=&channel=
  - https://www.nowcoder.com/discuss/797239?source_id=&channel=

- 金山云：https://www.nowcoder.com/discuss/experience/company?tagId=1003
  - https://www.nowcoder.com/discuss/98899?source_id=&channel=
  - https://www.nowcoder.com/discuss/94884?source_id=&channel=
  - https://www.nowcoder.com/discuss/93663?source_id=&channel=



### 牛客网其他

- *https://www.nowcoder.com/discuss/855750?source_id=profile_create_nctrack&

